{
  "settings": {
    "http_play_allow": 1
  },
  "make_stream": [
    {
      "id": "src_udp",
      "name": "Source UDP",
      "type": "udp",
      "enable": true,
      "input": [
        "udp://127.0.0.1:12120?reuse=1"
      ],
      "output": []
    },
    {
      "id": "recv_high",
      "name": "Recv High",
      "type": "udp",
      "enable": true,
      "input": [
        "udp://127.0.0.1:12121?reuse=1"
      ],
      "output": []
    },
    {
      "id": "recv_med",
      "name": "Recv Med",
      "type": "udp",
      "enable": true,
      "input": [
        "udp://127.0.0.1:12122?reuse=1"
      ],
      "output": []
    },
    {
      "id": "transcode_ladder_udp_publish",
      "type": "transcode",
      "name": "Transcode Ladder UDP Publish",
      "enable": true,
      "input": [
        "stream://src_udp"
      ],
      "transcode": {
        "engine": "cpu",
        "ffmpeg_global_args": [
          "-fflags",
          "+genpts"
        ],
        "profiles": [
          {
            "id": "HDHigh",
            "name": "720p",
            "width": 1280,
            "height": 720,
            "fps": 25,
            "bitrate_kbps": 2500,
            "maxrate_kbps": 3000
          },
          {
            "id": "HDMed",
            "name": "540p",
            "width": 960,
            "height": 540,
            "fps": 25,
            "bitrate_kbps": 1000,
            "maxrate_kbps": 1500
          }
        ],
        "publish": [
          {
            "type": "udp",
            "enabled": true,
            "profile": "HDHigh",
            "url": "udp://127.0.0.1:12121?pkt_size=1316"
          },
          {
            "type": "udp",
            "enabled": true,
            "profile": "HDMed",
            "url": "udp://127.0.0.1:12122?pkt_size=1316"
          }
        ],
        "watchdog": {
          "restart_delay_sec": 1,
          "restart_jitter_sec": 1,
          "restart_backoff_base_sec": 1,
          "restart_backoff_max_sec": 10,
          "no_progress_timeout_sec": 30,
          "max_error_lines_per_min": 200,
          "probe_interval_sec": 0,
          "max_restarts_per_10min": 10,
          "restart_cooldown_sec": 0
        }
      }
    }
  ]
}

