<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stream Hub</title>
  <meta name="application-name" content="Stream Hub" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg?v=20260213a" />
  <link rel="icon" type="image/x-icon" href="/favicon.ico?v=20260213a" />
  <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png?v=20260213a" />
  <link rel="manifest" href="/manifest.json?v=20260213a" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/styles.css?v=20260213a" />
  <script defer src="/app.js?v=20260213a"></script>
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="top-left">
        <nav class="top-nav">
          <button class="nav-link active" data-view="dashboard">Dashboard</button>
          <button class="nav-link" data-view="adapters">Adapters</button>
          <button class="nav-link" data-view="sessions">Sessions</button>
          <button class="nav-link" data-view="splitters">HLSSplitter</button>
          <button class="nav-link" data-view="buffers">Buffer</button>
          <button class="nav-link" data-view="access">Access</button>
          <button class="nav-link" data-view="settings" id="nav-settings">Settings</button>
          <button class="nav-link" data-view="logs">Log</button>
          <button class="nav-link" data-view="observability">Observability</button>
          <button class="nav-link" data-view="help">Help</button>
        </nav>
        <div class="search">
          <input id="search-input" type="search" placeholder="Click or press 'S' to search..." />
        </div>
      </div>
      <div class="top-right">
        <button class="link-btn" id="btn-new-adapter">New Adapter</button>
        <button class="link-btn" id="btn-new-stream">New Stream</button>
        <button class="link-btn" id="btn-view">View</button>
        <button class="link-btn" id="btn-logout">Logout</button>
        <div class="ui-stamp" id="ui-stamp">UI build 20260211d</div>
      </div>
    </header>

	    <div class="settings-menu" id="settings-menu" aria-hidden="true">
	      <button class="settings-item active" data-section="general">General</button>
	      <button class="settings-item" data-section="users">Users</button>
	      <button class="settings-item" data-section="hls">HLS</button>
	      <button class="settings-item" data-section="http-play">HTTP Play</button>
	      <button class="settings-item" data-section="public-urls">Public URLs</button>
	      <button class="settings-item" data-section="buffer">Buffer</button>
	      <button class="settings-item" data-section="http-auth">HTTP Authentication</button>
	      <button class="settings-item" data-section="softcam">Softcam</button>
	      <button class="settings-item" data-section="cas">CAS</button>
	      <button class="settings-item" data-section="servers">Servers</button>
      <button class="settings-item" data-section="groups">Groups</button>
      <button class="settings-item" data-section="import">Import</button>
      <button class="settings-item" data-section="edit-config">Edit Config</button>
      <button class="settings-item" data-section="config-history">Config History</button>
      <button class="settings-item" data-section="license">License</button>
      <button class="settings-item" data-section="restart">Restart</button>
    </div>

    <div class="view-menu" id="view-menu" aria-hidden="true">
      <div class="view-menu-group">
        <div class="view-menu-title">View</div>
        <button class="view-option" data-view-mode="table">Table (Flussonic-like)</button>
        <button class="view-option" data-view-mode="compact">Compact list</button>
        <button class="view-option" data-view-mode="cards">Cards</button>
      </div>
      <div class="view-menu-group">
        <div class="view-menu-title">Tiles</div>
        <button class="view-option" data-tiles-mode="compact">Compact tiles</button>
      </div>
      <div class="view-menu-group">
        <div class="view-menu-title">Filters</div>
        <button class="view-option" id="view-toggle-disabled" data-view-toggle="disabled" aria-pressed="true">Show disabled streams</button>
      </div>
      <div class="view-menu-group">
        <div class="view-menu-title">Theme</div>
        <button class="view-option" data-theme="auto">Auto</button>
        <button class="view-option" data-theme="light">Light</button>
        <button class="view-option" data-theme="dark">Dark</button>
      </div>
    </div>

    <main class="content">
      <section class="view active" id="view-dashboard">
        <div class="dashboard-notice" id="dashboard-notice"></div>
        <div class="dashboard-system" id="dashboard-system" hidden>
          <div class="dashboard-system-cards" id="dashboard-system-cards"></div>
        </div>
        <div class="stream-views" id="stream-views" data-view-mode="cards">
          <div class="tile-grid stream-view stream-view-cards" id="dashboard-streams"></div>
          <div class="stream-table stream-view stream-view-table" id="stream-table">
            <table class="stream-table-grid">
              <thead>
                <tr>
                  <th class="col-stream">Stream</th>
                  <th class="col-input">Input</th>
                  <th class="col-transcode">Transcode</th>
                  <th class="col-dvr">DVR</th>
                  <th class="col-output">Output</th>
                </tr>
              </thead>
              <tbody id="stream-table-body"></tbody>
            </table>
          </div>
          <div class="stream-compact stream-view stream-view-compact" id="stream-compact"></div>
        </div>
      </section>

      <section class="view" id="view-adapters">
        <div class="adapter-shell">
          <div class="panel adapter-list-panel">
            <div class="adapter-list-header">
              <div class="panel-title">Adapters</div>
              <button class="text-link" type="button" id="adapter-new">NEW ADAPTER</button>
            </div>
            <div class="adapter-list" id="adapter-list"></div>
            <div class="adapter-list-empty muted" id="adapter-list-empty">No adapters yet.</div>
          </div>

          <div class="panel adapter-editor" id="adapter-editor">
            <div class="adapter-editor-head">
              <div class="panel-title" id="adapter-title">Adapter settings</div>
              <div class="adapter-editor-actions">
                <button class="btn ghost" type="button" id="adapter-clear">Clear</button>
              </div>
            </div>

            <div class="tabbar adapter-tabbar">
              <button class="tab active" data-tab="general" data-tab-scope="adapter-editor">General</button>
              <button class="tab" data-tab="lnb" data-tab-scope="adapter-editor">LNB</button>
              <button class="tab" data-tab="advanced" data-tab-scope="adapter-editor">Advanced</button>
            </div>

            <form id="adapter-form">
              <div class="tab-content active" data-tab-content="general" data-tab-scope="adapter-editor">
                <label class="field adapter-picker">
                  <span>Adapter</span>
                  <select id="adapter-select"></select>
                </label>

                <label class="field adapter-picker">
                  <span>Detected DVB</span>
                  <div class="adapter-detected-row">
                    <div class="adapter-detected-select">
                      <select id="adapter-detected"></select>
                      <span class="adapter-detected-badge" id="adapter-detected-badge"></span>
                    </div>
                    <button class="btn ghost" type="button" id="adapter-detected-refresh">Refresh DVB list</button>
                  </div>
                  <div class="form-hint" id="adapter-detected-hint">
                    Select a detected adapter to fill Adapter/Device/Type fields.
                  </div>
                </label>

                <label class="checkline">
                  <input type="checkbox" id="adapter-enabled" checked />
                  <span>Enable</span>
                </label>

                <div class="form-grid">
                  <label class="field">
                    <span>ID</span>
                    <input type="text" id="adapter-id" placeholder="adapter_0" />
                  </label>
                  <label class="field">
                    <span>Adapter</span>
                    <select id="adapter-index"></select>
                  </label>
                  <label class="field">
                    <span>Device (fe)</span>
                    <select id="adapter-device"></select>
                  </label>
                  <label class="field">
                    <span>Type</span>
                    <select id="adapter-type">
                      <option value="S">S</option>
                      <option value="S2">S2</option>
                      <option value="T">T</option>
                      <option value="T2">T2</option>
                      <option value="C">C</option>
                      <option value="C/AC">C/AC</option>
                      <option value="C/B">C/B</option>
                      <option value="C/A">C/A</option>
                      <option value="C/C">C/C</option>
                      <option value="ATSC">ATSC</option>
                      <option value="ASI">ASI</option>
                    </select>
                  </label>
                </div>
                <div class="form-hint adapter-busy-warning" id="adapter-busy-warning"></div>

                <div class="adapter-group" data-group="sat">
                  <div class="form-grid">
                    <label class="field">
                      <span>TP (freq:pol:symbolrate)</span>
                      <input type="text" id="adapter-tp" placeholder="11044:V:43200" />
                    </label>
                  </div>
                </div>

                <div class="adapter-group" data-group="terrestrial">
                  <div class="form-grid">
                    <label class="field">
                      <span>Frequency (MHz)</span>
                      <input type="number" id="adapter-t-frequency" placeholder="498" />
                    </label>
                    <label class="field">
                      <span>Bandwidth</span>
                      <select id="adapter-bandwidth">
                        <option value="AUTO">AUTO</option>
                        <option value="6mhz">6MHz</option>
                        <option value="7mhz">7MHz</option>
                        <option value="8mhz">8MHz</option>
                      </select>
                    </label>
                    <label class="field">
                      <span>Guard interval</span>
                      <select id="adapter-guardinterval">
                        <option value="AUTO">AUTO</option>
                        <option value="1/4">1/4</option>
                        <option value="1/8">1/8</option>
                        <option value="1/16">1/16</option>
                        <option value="1/32">1/32</option>
                      </select>
                    </label>
                    <label class="field">
                      <span>Transmit mode</span>
                      <select id="adapter-transmitmode">
                        <option value="AUTO">AUTO</option>
                        <option value="1K">1K</option>
                        <option value="2K">2K</option>
                        <option value="4K">4K</option>
                        <option value="8K">8K</option>
                        <option value="16K">16K</option>
                        <option value="32K">32K</option>
                      </select>
                    </label>
                    <label class="field">
                      <span>Hierarchy</span>
                      <select id="adapter-hierarchy">
                        <option value="NONE">NONE</option>
                        <option value="AUTO">AUTO</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="4">4</option>
                      </select>
                    </label>
                  </div>
                </div>

                <div class="adapter-group" data-group="cable">
                  <div class="form-grid">
                    <label class="field">
                      <span>Frequency (MHz)</span>
                      <input type="number" id="adapter-c-frequency" placeholder="360" />
                    </label>
                    <label class="field">
                      <span>Symbolrate (KSym/s)</span>
                      <input type="number" id="adapter-c-symbolrate" placeholder="6900" />
                    </label>
                  </div>
                </div>

                <div class="adapter-group" data-group="atsc">
                  <div class="form-grid">
                    <label class="field">
                      <span>Frequency (MHz)</span>
                      <input type="number" id="adapter-atsc-frequency" placeholder="360" />
                    </label>
                  </div>
                </div>
              </div>

              <div class="tab-content" data-tab-content="lnb" data-tab-scope="adapter-editor">
                <div class="adapter-group" data-group="sat">
                  <div class="form-grid">
                    <label class="field">
                      <span>LNB (lof1:lof2:slof)</span>
                      <input type="text" id="adapter-lnb" placeholder="9750:10600:11700" />
                    </label>
                    <label class="checkline">
                      <input type="checkbox" id="adapter-lnb-sharing" />
                      <span>LNB sharing</span>
                    </label>
                    <label class="field">
                      <span>DiSEqC</span>
                      <input type="number" id="adapter-diseqc" placeholder="0" />
                    </label>
                    <label class="checkline">
                      <input type="checkbox" id="adapter-tone" />
                      <span>22 KHz tone</span>
                    </label>
                    <label class="field">
                      <span>Rolloff</span>
                      <select id="adapter-rolloff">
                        <option value="AUTO">AUTO</option>
                        <option value="20">20</option>
                        <option value="25">25</option>
                        <option value="35">35</option>
                      </select>
                    </label>
                    <label class="field">
                      <span>UniCable SCR</span>
                      <input type="number" id="adapter-uni-scr" placeholder="0" />
                    </label>
                    <label class="field">
                      <span>UniCable freq (MHz)</span>
                      <input type="number" id="adapter-uni-frequency" placeholder="0" />
                    </label>
                  </div>
                </div>
                <div class="adapter-group adapter-empty" data-group="not-sat">
                  <div class="panel subtle">LNB settings are available for satellite adapters only.</div>
                </div>
              </div>

              <div class="tab-content" data-tab-content="advanced" data-tab-scope="adapter-editor">
                <div class="form-grid">
                  <label class="field">
                    <span>Modulation</span>
                    <select id="adapter-modulation">
                      <option value="NONE">NONE</option>
                      <option value="AUTO">AUTO</option>
                      <option value="QPSK">QPSK</option>
                      <option value="QAM16">QAM16</option>
                      <option value="QAM32">QAM32</option>
                      <option value="QAM64">QAM64</option>
                      <option value="QAM128">QAM128</option>
                      <option value="QAM256">QAM256</option>
                      <option value="VSB8">VSB8</option>
                      <option value="VSB16">VSB16</option>
                      <option value="PSK8">PSK8</option>
                      <option value="APSK16">APSK16</option>
                      <option value="APSK32">APSK32</option>
                      <option value="DQPSK">DQPSK</option>
                    </select>
                  </label>
                  <label class="field">
                    <span>CA PMT delay (sec)</span>
                    <input type="number" id="adapter-ca-pmt-delay" placeholder="3" />
                  </label>
                  <label class="field">
                    <span>Buffer size</span>
                    <input type="number" id="adapter-buffer-size" placeholder="0" />
                  </label>
                  <label class="field">
                    <span>Stream ID (PLP)</span>
                    <input type="number" id="adapter-stream-id" placeholder="0" />
                  </label>
                </div>

                <div class="form-grid">
                  <label class="checkline">
                    <input type="checkbox" id="adapter-budget" />
                    <span>Disable hardware filter (budget)</span>
                  </label>
                  <label class="checkline">
                    <input type="checkbox" id="adapter-raw-signal" />
                    <span>Raw signal</span>
                  </label>
                  <label class="checkline">
                    <input type="checkbox" id="adapter-log-signal" />
                    <span>Log signal</span>
                  </label>
                </div>
              </div>

              <div class="modal-footer">
                <button class="btn ghost danger" type="button" id="adapter-delete">Remove</button>
                <div class="footer-actions">
                  <button class="btn" type="submit" id="adapter-save">Save</button>
                  <button class="btn ghost" type="button" id="adapter-scan" disabled>Scan</button>
                  <button class="btn ghost" type="button" id="adapter-cancel">Cancel</button>
                  <div class="form-note" id="adapter-error"></div>
                </div>
              </div>
            </form>
            <div class="adapter-editor-empty" id="adapter-editor-empty">
              Select an adapter or create a new one.
            </div>
          </div>
        </div>
      </section>

      <section class="view" id="view-splitters">
        <div class="splitter-shell">
          <div class="panel splitter-list-panel">
            <div class="panel-title-row">
              <div class="panel-title">HLSSplitter</div>
              <button class="text-link" type="button" id="splitter-new">NEW INSTANCE</button>
            </div>
            <div class="splitter-list" id="splitter-list"></div>
            <div class="splitter-list-empty muted" id="splitter-list-empty">No instances yet.</div>
            <div id="splitter-sidebar-help"></div>
          </div>

          <div class="panel splitter-editor" id="splitter-editor">
            <div class="panel-title-row">
              <div>
                <div class="panel-title" id="splitter-title">Splitter settings</div>
                <div class="muted" id="splitter-state">Status: idle</div>
                <div class="muted" id="splitter-runtime">Uptime: n/a â€¢ Restarts (10m): 0</div>
              </div>
              <div class="panel-actions">
                <button class="btn ghost" type="button" id="splitter-start">Start</button>
                <button class="btn ghost" type="button" id="splitter-stop">Stop</button>
                <button class="btn ghost" type="button" id="splitter-restart">Restart</button>
                <button class="btn ghost" type="button" id="splitter-apply">Apply config</button>
                <button class="btn ghost" type="button" id="splitter-config">View config</button>
              </div>
            </div>

            <form id="splitter-form">
              <label class="checkline">
                <input type="checkbox" id="splitter-enabled" checked />
                <span>Enable</span>
              </label>
              <div class="form-grid">
                <label class="field">
                  <span>ID</span>
                  <input type="text" id="splitter-id" placeholder="splitter_main" />
                </label>
                <label class="field">
                  <span>Name</span>
                  <input type="text" id="splitter-name" placeholder="HLSSplitter Main" />
                </label>
                <label class="field">
                  <span>Port</span>
                  <input type="number" id="splitter-port" placeholder="8089" />
                </label>
                <label class="field">
                  <span>In interface</span>
                  <input type="text" id="splitter-in-interface" placeholder="eth0" />
                </label>
                <label class="field">
                  <span>Out interface</span>
                  <input type="text" id="splitter-out-interface" placeholder="eth0" />
                </label>
                <label class="field">
                  <span>Log type</span>
                  <input type="text" id="splitter-logtype" placeholder="stderr" />
                </label>
                <label class="field">
                  <span>Log path</span>
                  <input type="text" id="splitter-logpath" placeholder="/var/log/hlssplitter.log" />
                </label>
                <label class="field">
                  <span>Config path</span>
                  <input type="text" id="splitter-config-path" placeholder="./data/splitters/splitter_main.xml" />
                </label>
              </div>
              <div class="form-subsection">
                <div class="panel-title">Presets</div>
                <div class="form-grid">
                  <label class="field">
                    <span>Profile</span>
                    <select id="splitter-preset">
                      <option value="">Custom</option>
                      <option value="basic">Basic (terminal log)</option>
                      <option value="file_log">File logging</option>
                      <option value="syslog">Syslog logging</option>
                    </select>
                  </label>
                  <div class="field">
                    <span>Apply</span>
                    <button class="btn ghost" type="button" id="splitter-preset-apply">Apply</button>
                  </div>
                </div>
                <div class="form-hint">Applies port/log/config defaults (keeps ID/Name).</div>
              </div>
              <div class="splitter-hint muted">
                Client URL template: <span id="splitter-url-template">http://&lt;server_ip&gt;:&lt;port&gt;/path</span>
              </div>
              <div class="apply-row">
                <button class="btn" type="submit" id="splitter-save">Save</button>
              </div>
              <div class="form-note" id="splitter-error"></div>
            </form>

            <div class="panel splitter-section">
              <div class="panel-title-row">
                <div class="panel-title">Allow rules</div>
                <button class="text-link" type="button" id="splitter-allow-new">NEW RULE</button>
              </div>
              <div class="table splitter-allow-table" id="splitter-allow-table"></div>
              <div class="muted" id="splitter-allow-empty">No rules (defaults to allow 0.0.0.0).</div>
            </div>

            <div class="panel splitter-section">
              <div class="panel-title-row">
                <div class="panel-title">Links</div>
                <button class="text-link" type="button" id="splitter-link-new">NEW LINK</button>
              </div>
              <div class="table splitter-link-table" id="splitter-link-table"></div>
              <div class="muted" id="splitter-link-empty">No links yet.</div>
            </div>
          </div>
        </div>
      </section>

      <section class="view" id="view-buffers">
        <div class="buffer-shell">
          <div class="panel buffer-list-panel">
            <div class="panel-title-row">
              <div class="panel-title">Buffer</div>
              <button class="text-link" type="button" id="buffer-new">NEW RESOURCE</button>
            </div>
            <div class="buffer-list" id="buffer-list"></div>
            <div class="buffer-list-empty muted" id="buffer-list-empty">No resources yet.</div>
            <div id="buffer-sidebar-help"></div>
          </div>

          <div class="panel buffer-editor" id="buffer-editor">
            <div class="panel-title-row">
              <div>
                <div class="panel-title" id="buffer-title">Buffer settings</div>
                <div class="muted" id="buffer-state">Status: idle</div>
              </div>
              <div class="panel-actions">
                <button class="btn ghost" type="button" id="buffer-reload">Reload</button>
                <button class="btn ghost" type="button" id="buffer-restart-reader">Restart reader</button>
              </div>
            </div>

            <form id="buffer-form">
              <label class="checkline">
                <input type="checkbox" id="buffer-enabled" checked />
                <span>Enable</span>
              </label>
              <div class="form-grid">
                <label class="field">
                  <span>ID</span>
                  <input type="text" id="buffer-id" placeholder="buffer_main" />
                </label>
                <label class="field">
                  <span>Name</span>
                  <input type="text" id="buffer-name" placeholder="HTTP TS Buffer" />
                </label>
                <label class="field">
                  <span>Path</span>
                  <input type="text" id="buffer-path" placeholder="/play/channel" />
                </label>
              </div>
              <div class="buffer-hint muted">
                Output URL: <span id="buffer-output-url">http://&lt;server_ip&gt;:8089/play/channel</span>
                <button class="btn ghost" type="button" id="buffer-copy-url">Copy</button>
              </div>

              <div class="buffer-subsection">
                <div class="panel-title">Presets</div>
                <div class="form-grid">
                  <label class="field">
                    <span>Profile</span>
                    <select id="buffer-preset">
                      <option value="">Custom</option>
                      <option value="live_backup">Live + backup</option>
                      <option value="multi_input">Multi-input (active)</option>
                      <option value="low_latency">Low latency</option>
                    </select>
                  </label>
                  <div class="field">
                    <span>Apply</span>
                    <button class="btn ghost" type="button" id="buffer-preset-apply">Apply</button>
                  </div>
                </div>
                <div class="form-hint">Applies tuning fields only (keeps ID/Name/Path/Enable).</div>
              </div>

              <div class="buffer-subsection">
                <div class="panel-title">Backup</div>
                <div class="form-grid">
                  <label class="field">
                    <span>Type</span>
                    <select id="buffer-backup-type">
                      <option value="passive">passive</option>
                      <option value="active">active</option>
                    </select>
                  </label>
                  <label class="field">
                    <span>No data timeout (sec)</span>
                    <input type="number" id="buffer-no-data-timeout" placeholder="3" />
                  </label>
                  <label class="field">
                    <span>Backup start delay (sec)</span>
                    <input type="number" id="buffer-backup-start-delay" placeholder="3" />
                  </label>
                  <label class="field">
                    <span>Backup return delay (sec)</span>
                    <input type="number" id="buffer-backup-return-delay" placeholder="10" />
                  </label>
                  <label class="field">
                    <span>Probe interval (sec)</span>
                    <input type="number" id="buffer-backup-probe-interval" placeholder="30" />
                  </label>
                </div>
              </div>

              <div class="buffer-subsection">
                <div class="panel-title">Buffering</div>
                <div class="form-grid">
                  <label class="field">
                    <span>Buffering (sec)</span>
                    <input type="number" id="buffer-buffering-sec" placeholder="8" />
                  </label>
                  <label class="field">
                    <span>Bandwidth (kbps)</span>
                    <input type="number" id="buffer-bandwidth-kbps" placeholder="4000" />
                  </label>
                  <label class="field">
                    <span>Client start offset (sec)</span>
                    <input type="number" id="buffer-client-start-offset" placeholder="1" />
                  </label>
                  <label class="field">
                    <span>Max client lag (ms)</span>
                    <input type="number" id="buffer-max-client-lag" placeholder="3000" />
                  </label>
                </div>
              </div>

              <div class="buffer-subsection">
                <div class="panel-title">Smart start</div>
                <label class="checkline">
                  <input type="checkbox" id="buffer-smart-enabled" />
                  <span>Enable smart start</span>
                </label>
                <div class="form-grid">
                  <label class="field">
                    <span>Target delay (ms)</span>
                    <input type="number" id="buffer-smart-target-delay" placeholder="1000" />
                  </label>
                  <label class="field">
                    <span>Lookback (ms)</span>
                    <input type="number" id="buffer-smart-lookback" placeholder="5000" />
                  </label>
                  <label class="field">
                    <span>Wait ready (ms)</span>
                    <input type="number" id="buffer-smart-wait-ready" placeholder="1500" />
                  </label>
                  <label class="field">
                    <span>Max lead (ms)</span>
                    <input type="number" id="buffer-smart-max-lead" placeholder="2000" />
                  </label>
                </div>
                <div class="form-grid">
                  <label class="checkline">
                    <input type="checkbox" id="buffer-smart-require-patpmt" />
                    <span>Require PAT/PMT</span>
                  </label>
                  <label class="checkline">
                    <input type="checkbox" id="buffer-smart-require-keyframe" />
                    <span>Require keyframe</span>
                  </label>
                  <label class="checkline">
                    <input type="checkbox" id="buffer-smart-require-pcr" />
                    <span>Require PCR</span>
                  </label>
                  <label class="checkline">
                    <input type="checkbox" id="buffer-av-align-enabled" />
                    <span>PTS align A/V</span>
                  </label>
                  <label class="checkline">
                    <input type="checkbox" id="buffer-paramset-required" />
                    <span>Require paramsets</span>
                  </label>
                  <label class="checkline">
                    <input type="checkbox" id="buffer-start-debug" />
                    <span>Enable start debug</span>
                  </label>
                </div>
                <div class="form-grid">
                  <label class="field">
                    <span>Keyframe detect</span>
                    <select id="buffer-keyframe-detect">
                      <option value="auto">auto</option>
                      <option value="random_access">random_access</option>
                      <option value="idr_parse">idr_parse</option>
                    </select>
                  </label>
                  <label class="field">
                    <span>Max A/V desync (ms)</span>
                    <input type="number" id="buffer-av-max-desync" placeholder="500" />
                  </label>
                </div>
              </div>

              <div class="buffer-subsection">
                <div class="panel-title">TS output</div>
                <div class="form-grid">
                  <label class="checkline">
                    <input type="checkbox" id="buffer-ts-resync" />
                    <span>Resync on 0x47</span>
                  </label>
                  <label class="checkline">
                    <input type="checkbox" id="buffer-ts-drop" />
                    <span>Drop corrupt packets</span>
                  </label>
                  <label class="checkline">
                    <input type="checkbox" id="buffer-ts-rewrite" />
                    <span>Rewrite CC (advanced)</span>
                  </label>
                  <label class="field">
                    <span>Pacing</span>
                    <select id="buffer-pacing-mode">
                      <option value="none">none</option>
                      <option value="pcr">pcr</option>
                    </select>
                  </label>
                </div>
              </div>

              <div class="apply-row">
                <button class="btn" type="submit" id="buffer-save">Save</button>
                <button class="btn ghost danger" type="button" id="buffer-delete">Delete</button>
              </div>
            </form>

            <div class="panel buffer-section">
              <div class="panel-title-row">
                <div class="panel-title">Inputs</div>
                <button class="text-link" type="button" id="buffer-input-new">NEW INPUT</button>
              </div>
              <div class="table buffer-input-table" id="buffer-input-table"></div>
              <div class="muted" id="buffer-input-empty">No inputs yet.</div>
            </div>

            <div class="panel buffer-section">
              <div class="panel-title-row">
                <div class="panel-title">Allow rules</div>
                <button class="text-link" type="button" id="buffer-allow-new">NEW RULE</button>
              </div>
              <div class="table buffer-allow-table" id="buffer-allow-table"></div>
              <div class="muted" id="buffer-allow-empty">No rules (defaults to allow 0.0.0.0).</div>
            </div>

            <div class="panel buffer-section">
              <div class="panel-title">Diagnostics</div>
              <div class="buffer-diagnostics" id="buffer-diagnostics"></div>
            </div>
          </div>
        </div>
      </section>

      <section class="view" id="view-sessions">
        <div class="table-header session-toolbar">
          <div>Total Sessions: <span id="session-total">0</span></div>
          <div class="session-controls">
            <input type="text" id="session-filter" placeholder="Filter sessions..." />
            <label class="session-limit">
              <span>Limit</span>
              <select id="session-limit">
                <option value="50">50</option>
                <option value="100">100</option>
                <option value="200">200</option>
                <option value="500">500</option>
              </select>
            </label>
            <label class="checkline">
              <input type="checkbox" id="session-group" />
              <span>Group by stream</span>
            </label>
            <button class="link-btn" id="session-pause">Pause</button>
            <button class="link-btn" id="session-refresh">Refresh</button>
          </div>
        </div>
        <div class="table" id="session-table">
          <div class="table-row header">
            <div>Server</div>
            <div>Stream</div>
            <div>IP</div>
            <div>Login</div>
            <div>Uptime (hour:min)</div>
            <div>User-Agent</div>
            <div></div>
          </div>
          <div class="table-row">
            <div class="muted">No sessions yet</div>
          </div>
        </div>
      </section>

      <section class="view" id="view-access">
        <div class="table-header access-toolbar">
          <div>Total Entries: <span id="access-total">0</span></div>
          <div class="access-controls">
            <label class="access-limit">
              <span>Mode</span>
              <select id="access-mode">
                <option value="access">Access log</option>
                <option value="audit">Audit</option>
              </select>
            </label>
          </div>
          <div class="access-controls" id="access-controls">
            <select id="access-event-filter">
              <option value="all">All events</option>
              <option value="connect">Connect</option>
              <option value="disconnect">Disconnect</option>
              <option value="timeout">Timeout</option>
            </select>
            <input type="text" id="access-text-filter" placeholder="Filter access logs..." />
            <label class="access-limit">
              <span>Limit</span>
              <select id="access-limit">
                <option value="50">50</option>
                <option value="100">100</option>
                <option value="200">200</option>
                <option value="500">500</option>
              </select>
            </label>
            <div class="log-count muted">Shown: <span id="access-count">0</span></div>
            <button class="link-btn" id="access-pause">Pause</button>
            <button class="link-btn" id="access-clear">Clear</button>
          </div>
          <div class="access-controls" id="audit-controls" hidden>
            <input type="text" id="audit-action-filter" placeholder="Action (ai_change)" />
            <input type="text" id="audit-actor-filter" placeholder="Actor (admin)" />
            <select id="audit-ok-filter">
              <option value="">All</option>
              <option value="1">OK</option>
              <option value="0">Failed</option>
            </select>
            <label class="checkline">
              <input type="checkbox" id="audit-ai-only" />
              <span>AI changes only</span>
            </label>
            <label class="access-limit">
              <span>Limit</span>
              <select id="audit-limit">
                <option value="50">50</option>
                <option value="100">100</option>
                <option value="200">200</option>
                <option value="500">500</option>
              </select>
            </label>
            <button class="link-btn" id="audit-refresh">Refresh</button>
            <div class="log-count muted">Shown: <span id="audit-count">0</span></div>
          </div>
        </div>
        <div class="table access-table" id="access-table">
          <div class="table-row header">
            <div>Time</div>
            <div>Stream</div>
            <div>Protocol</div>
            <div>IP</div>
            <div>Event</div>
            <div>Info</div>
          </div>
          <div class="table-row">
            <div class="muted">No access logs yet</div>
          </div>
        </div>
        <div class="table access-table" id="audit-table" hidden>
          <div class="table-row header">
            <div>Time</div>
            <div>Actor</div>
            <div>Action</div>
            <div>Target</div>
            <div>IP</div>
            <div>OK</div>
            <div>Message</div>
          </div>
          <div class="table-row">
            <div class="muted">No audit entries yet</div>
          </div>
        </div>
      </section>

      <section class="view" id="view-observability">
        <div class="panel observability-panel">
          <div class="panel-title">Observability</div>
          <div class="form-grid observability-controls">
            <label class="field">
              <span>Range</span>
              <select id="obs-range">
                <option value="24h">24h</option>
                <option value="7d">7d</option>
                <option value="30d">30d</option>
              </select>
            </label>
            <label class="field">
              <span>Scope</span>
              <select id="obs-scope">
                <option value="global">Global</option>
                <option value="stream">Stream</option>
              </select>
            </label>
            <label class="field" id="obs-stream-field">
              <span>Stream</span>
              <select id="obs-stream"></select>
            </label>
            <div class="field">
              <span>&nbsp;</span>
              <button class="btn ghost" type="button" id="obs-refresh">Refresh</button>
            </div>
          </div>

          <div class="observability-empty muted" id="obs-empty">Observability disabled or no data yet.</div>
          <div class="observability-hint muted" id="obs-hint"></div>

          <div class="observability-system" id="obs-system" hidden>
            <div class="observability-system-head">
              <div class="chart-title">Server</div>
              <label class="field obs-net-field">
                <span>Network</span>
                <select id="obs-net-iface"></select>
              </label>
            </div>
            <div class="observability-system-cards" id="obs-system-cards"></div>

          </div>

          <div class="observability-summary" id="obs-summary"></div>

          <div class="observability-charts" id="obs-charts">
            <div class="chart-card" id="obs-chart-card-bitrate">
              <div class="chart-title-row">
                <div class="chart-title" id="obs-chart-title-bitrate">Bitrate</div>
                <div class="chart-legend" id="obs-chart-legend-bitrate"></div>
              </div>
              <canvas id="obs-chart-bitrate"></canvas>
            </div>
            <div class="chart-card" id="obs-chart-card-streams">
              <div class="chart-title-row">
                <div class="chart-title" id="obs-chart-title-streams">Streams</div>
                <div class="chart-legend" id="obs-chart-legend-streams"></div>
              </div>
              <canvas id="obs-chart-streams"></canvas>
            </div>
            <div class="chart-card" id="obs-chart-card-switches">
              <div class="chart-title-row">
                <div class="chart-title" id="obs-chart-title-switches">Switches / Alerts</div>
                <div class="chart-legend" id="obs-chart-legend-switches"></div>
              </div>
              <canvas id="obs-chart-switches"></canvas>
            </div>
            <div class="chart-empty-note muted" id="obs-charts-empty" hidden>No data for selected range.</div>
          </div>

          <div class="observability-logs" id="obs-errors">
            <div class="chart-title">Recent errors</div>
            <div class="observability-log-list" id="obs-logs"></div>
          </div>

        </div>
      </section>

      <section class="view" id="view-settings">
        <div class="settings-shell">
          <div class="settings-section active" data-section="general">
            <div class="settings-general" id="settings-general-root"></div>
          </div>

          <div class="settings-section" data-section="users">
            <div class="panel users-panel">
              <div class="panel-title-row">
                <div class="panel-title">Users</div>
                <button class="text-link" type="button" id="btn-user-new">NEW USER</button>
              </div>
              <div class="table" id="users-table">
                <div class="table-row header">
                  <div>Login</div>
                  <div>Role</div>
                  <div>Status</div>
                  <div>Created</div>
                  <div>Last login IP</div>
                  <div></div>
                </div>
              </div>
              <div class="muted" id="users-empty">No users yet.</div>
            </div>
            <div class="panel">
              <div class="panel-title">Password policy</div>
              <div class="form-grid">
                <label class="field">
                  <span>Min length</span>
                  <input type="number" id="password-min-length" placeholder="8" />
                </label>
              </div>
              <label class="checkline">
                <input type="checkbox" id="password-require-letter" />
                <span>Require letter</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="password-require-number" />
                <span>Require number</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="password-require-symbol" />
                <span>Require symbol</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="password-require-mixed" />
                <span>Require mixed case</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="password-disallow-username" />
                <span>Disallow username in password</span>
              </label>
              <div class="apply-row">
                <button class="btn" type="button" id="btn-apply-password-policy">Apply</button>
              </div>
            </div>
          </div>

	          <div class="settings-section" data-section="hls">
	            <div class="form-stack">
	              <label class="field">
	                <span>Storage backend</span>
	                <select id="hls-storage">
	                  <option value="disk">Disk (classic)</option>
	                  <option value="memfd">Memfd (in-memory, zero disk I/O)</option>
	                </select>
	              </label>
	              <div class="form-hint">
	                Memfd keeps HLS segments in memory and serves them with low CPU (sendfile on Linux).
	              </div>
	              <label class="checkline hls-memfd-only" hidden>
	                <input type="checkbox" id="hls-on-demand" />
	                <span>On-demand (generate only when clients request /hls/...)</span>
	              </label>
	              <label class="field hls-memfd-only" hidden>
	                <span>Idle timeout (sec)</span>
	                <input type="number" id="hls-idle-timeout" placeholder="30" min="0" />
	              </label>
	              <label class="field hls-memfd-only" hidden>
	                <span>Max memory per stream (MB)</span>
	                <input type="number" id="hls-max-bytes-mb" placeholder="64" min="0" />
	              </label>
	              <label class="field hls-memfd-only" hidden>
	                <span>Max segments per stream</span>
	                <input type="number" id="hls-max-segments" placeholder="12" min="0" />
	              </label>
	              <div class="form-hint hls-memfd-only" hidden>
	                Tip: set 0 to use defaults (bytes: 64MB, segments: window*2).
	              </div>
	              <label class="field">
	                <span>Duration</span>
	                <input type="number" id="hls-duration" placeholder="Segments duration in seconds" />
	              </label>
              <label class="field">
                <span>Quantity</span>
                <input type="number" id="hls-quantity" placeholder="Number of segments" />
              </label>
              <label class="field">
                <span>Segments naming</span>
                <select id="hls-naming">
                  <option value="pcr">PCR hash</option>
                  <option value="sequence">Sequence</option>
                </select>
              </label>
              <label class="field">
                <span>Session timeout</span>
                <input type="number" id="hls-session-timeout" placeholder="Default: 60" />
              </label>
              <label class="field">
                <span>Resource path</span>
                <select id="hls-resource-path">
                  <option value="absolute">Absolute</option>
                  <option value="relative">Relative</option>
                  <option value="full">Full</option>
                </select>
              </label>
              <label class="checkline">
                <input type="checkbox" id="hls-round-duration" />
                <span>Round duration value</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="hls-expires" />
                <span>Use Expires header</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="hls-pass-data" />
                <span>Pass all data PIDs</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="hls-m3u-headers" />
                <span>Use default headers for .m3u8</span>
              </label>
              <label class="field">
                <span>TS Extension</span>
                <input type="text" id="hls-ts-extension" placeholder="ts" />
              </label>
              <label class="field">
                <span>TS mime type</span>
                <input type="text" id="hls-ts-mime" placeholder="video/MP2T" />
              </label>
              <label class="checkline">
                <input type="checkbox" id="hls-ts-headers" />
                <span>Use default headers for .ts</span>
              </label>
              <div class="apply-row">
                <button class="btn ghost" type="button" id="btn-save-hls">Save</button>
                <button class="btn" type="button" id="btn-apply-hls">Save &amp; Restart</button>
              </div>
            </div>
          </div>

          <div class="settings-section" data-section="http-play">
            <div class="form-stack">
              <label class="checkline">
                <input type="checkbox" id="http-play-allow" />
                <span>Allow HTTP access to all streams</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="http-play-hls" />
                <span>Allow HLS access to all streams</span>
              </label>
              <div class="form-hint is-warning" id="http-play-hls-storage-warning" hidden>
                HLS is enabled, but storage backend is Disk. This may cause high disk I/O.
                <button class="text-link is-warning" type="button" id="btn-hls-switch-memfd">Switch to Memfd</button>
              </div>
              <label class="field">
                <span>HTTP play port</span>
                <input type="number" id="http-play-port" placeholder="Custom port" />
              </label>
              <label class="checkline">
                <input type="checkbox" id="http-play-no-tls" />
                <span>Disable TLS on HTTP Play port</span>
              </label>
              <label class="field">
                <span>Path to TV logos</span>
                <input type="text" id="http-play-logos" />
              </label>
              <label class="field">
                <span>Path to TV screenshots</span>
                <input type="text" id="http-play-screens" />
              </label>
              <label class="field">
                <span>Custom name for playlist</span>
                <input type="text" id="http-play-playlist-name" placeholder="playlist.m3u8" />
              </label>
              <label class="field">
                <span>Playlist arrange</span>
                <input type="text" id="http-play-arrange" placeholder="tv" />
              </label>
              <label class="field">
                <span>HTTP buffer size (KB)</span>
                <input type="number" id="http-play-buffer" placeholder="4000" />
              </label>
              <label class="field">
                <span>M3U header</span>
                <input type="text" id="http-play-m3u-header" placeholder="url-tvg=&quot;https://...&quot;" />
              </label>
              <label class="field">
                <span>XSPF playlist title</span>
                <input type="text" id="http-play-xspf-title" placeholder="Playlist" />
              </label>
	              <div class="apply-row">
	                <button class="btn ghost" type="button" id="btn-save-http-play">Save</button>
	                <button class="btn" type="button" id="btn-apply-http-play">Save &amp; Restart</button>
	              </div>
	            </div>
	          </div>

	          <div class="settings-section" data-section="public-urls">
	            <div class="form-stack">
	              <div class="panel-title">Public URLs</div>
		              <div class="form-hint">
		                Used to generate full links in the UI (Output list, Publish links, Copy buttons).
		                If empty, Stream Hub falls back to the current browser origin.
		              </div>
	              <label class="field">
	                <span>HTTP base URL</span>
	                <input type="text" id="public-http-base-url" placeholder="http://example.com:9060" />
	              </label>
	              <label class="field">
	                <span>HTTPS base URL (optional)</span>
	                <input type="text" id="public-https-base-url" placeholder="https://example.com" />
	              </label>
	              <label class="field">
	                <span>HLS base URL (optional)</span>
	                <input type="text" id="public-hls-base-url" placeholder="https://example.com" />
	              </label>
	              <label class="field">
	                <span>DASH base URL (optional)</span>
	                <input type="text" id="public-dash-base-url" placeholder="https://example.com" />
	              </label>
	              <label class="field">
	                <span>RTMP base URL (optional)</span>
	                <input type="text" id="public-rtmp-base-url" placeholder="rtmp://example.com:1935" />
	              </label>
	              <label class="field">
	                <span>RTSP base URL (optional)</span>
	                <input type="text" id="public-rtsp-base-url" placeholder="rtsp://example.com:554" />
	              </label>
	              <div class="apply-row">
	                <button class="btn" type="button" id="btn-save-public-urls">Save</button>
	              </div>
	            </div>
	          </div>

	          <div class="settings-section" data-section="buffer">
	            <div class="form-stack">
	              <label class="checkline">
	                <input type="checkbox" id="buffer-setting-enabled" />
	                <span>Enable HTTP TS buffer server</span>
              </label>
              <div class="form-grid">
                <label class="field">
                  <span>Listen host</span>
                  <input type="text" id="buffer-setting-host" placeholder="0.0.0.0" />
                </label>
                <label class="field">
                  <span>Listen port</span>
                  <input type="number" id="buffer-setting-port" placeholder="8089" />
                </label>
                <label class="field">
                  <span>Source bind interface</span>
                  <input type="text" id="buffer-setting-source-interface" placeholder="eth0" />
                </label>
                <label class="field">
                  <span>Max clients</span>
                  <input type="number" id="buffer-setting-max-clients" placeholder="2000" />
                </label>
                <label class="field">
                  <span>Client read timeout (sec)</span>
                  <input type="number" id="buffer-setting-client-timeout" placeholder="20" />
                </label>
              </div>
              <div class="apply-row">
                <button class="btn" id="btn-apply-buffer">Apply</button>
              </div>
            </div>
          </div>

          <div class="settings-section" data-section="http-auth">
            <div class="form-stack">
              <label class="checkline">
                <input type="checkbox" id="http-auth-enabled" />
                <span>Enable HTTP authentication</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="http-auth-users" />
                <span>Allow Basic auth (users table)</span>
              </label>
              <label class="field">
                <span>Allowed IPs (comma separated)</span>
                <input type="text" id="http-auth-allow" placeholder="127.0.0.1, 10.0.0.0/24" />
              </label>
              <label class="field">
                <span>Denied IPs (comma separated)</span>
                <input type="text" id="http-auth-deny" placeholder="1.2.3.4, 45.139.0.0/16" />
              </label>
              <label class="field">
                <span>Tokens (comma separated)</span>
                <input type="text" id="http-auth-tokens" placeholder="token1, token2" />
              </label>
              <label class="field">
                <span>Basic auth realm</span>
                <input type="text" id="http-auth-realm" placeholder="Stream Hub" />
              </label>
              <div class="form-hint">Token auth backend (Flussonic-like)</div>
              <label class="field">
                <span>On-play backend URL</span>
                <input type="text" id="auth-on-play-url" placeholder="http://127.0.0.1:9100/on_play" />
              </label>
              <label class="field">
                <span>On-publish backend URL</span>
                <input type="text" id="auth-on-publish-url" placeholder="http://127.0.0.1:9100/on_publish" />
              </label>
              <label class="field">
                <span>Backend timeout (ms)</span>
                <input type="number" id="auth-timeout-ms" placeholder="3000" />
              </label>
              <label class="field">
                <span>Allow duration (sec)</span>
                <input type="number" id="auth-default-duration" placeholder="180" />
              </label>
              <label class="field">
                <span>Deny cache (sec)</span>
                <input type="number" id="auth-deny-cache" placeholder="180" />
              </label>
              <label class="field">
                <span>Session hash algorithm</span>
                <select id="auth-hash-algo">
                  <option value="sha1">sha1</option>
                  <option value="md5">md5</option>
                </select>
              </label>
              <label class="checkline">
                <input type="checkbox" id="auth-hls-rewrite" />
                <span>Rewrite HLS playlists with token</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="auth-admin-bypass" />
                <span>Allow admin UI bypass</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="auth-allow-no-token" />
                <span>Allow requests without token</span>
              </label>
              <label class="field">
                <span>Overlimit policy</span>
                <select id="auth-overlimit-policy">
                  <option value="deny_new">deny_new</option>
                  <option value="kick_oldest">kick_oldest</option>
                </select>
              </label>
              <div class="apply-row">
                <button class="btn ghost" type="button" id="btn-save-http-auth">Save</button>
                <button class="btn" type="button" id="btn-apply-http-auth">Save &amp; Restart</button>
              </div>
            </div>
          </div>

          <div class="settings-section" data-section="softcam">
            <div class="panel users-panel">
              <div class="panel-title-row">
                <div class="panel-title">Softcam</div>
                <button class="text-link" type="button" id="softcam-new">NEW SOFTCAM</button>
              </div>
              <div class="table" id="softcam-table">
                <div class="table-row header">
                  <div>ID</div>
                  <div>Name</div>
                  <div>Type</div>
                  <div>Address</div>
                  <div>User</div>
                  <div>Status</div>
                  <div></div>
                </div>
              </div>
              <div class="muted" id="softcam-empty">No softcam entries yet</div>
            </div>
            <div class="muted">
              Softcam entries are stored in settings and applied on save.
            </div>
          </div>

          <div class="settings-section" data-section="cas">
            <div class="panel">
              <div class="panel-title">CAS Defaults</div>
              <label class="checkline">
                <input type="checkbox" id="cas-default" />
                <span>Pass CA tables (cas) by default</span>
              </label>
              <div class="form-hint">
                Applies only when a stream input does not specify <code>cas</code> explicitly.
              </div>
              <div class="apply-row">
                <button class="btn" type="button" id="btn-apply-cas">Apply</button>
              </div>
            </div>
          </div>

          <div class="settings-section" data-section="servers">
            <div class="panel users-panel">
              <div class="panel-title-row">
                <div class="panel-title">Servers</div>
                <button class="text-link" type="button" id="server-new">NEW SERVER</button>
              </div>
              <div class="table" id="server-table">
                <div class="table-row header">
                  <div>ID</div>
                  <div>Name</div>
                  <div>Type</div>
                  <div>Address</div>
                  <div>Login</div>
                  <div>Status</div>
                  <div></div>
                </div>
              </div>
              <div class="muted" id="server-empty">No servers yet</div>
            </div>
          </div>

          <div class="settings-section" data-section="groups">
            <div class="panel users-panel">
              <div class="panel-title-row">
                <div class="panel-title">Groups</div>
                <button class="text-link" type="button" id="group-new">NEW GROUP</button>
              </div>
              <div class="table" id="group-table">
                <div class="table-row header">
                  <div>ID</div>
                  <div>Name</div>
                  <div></div>
                </div>
              </div>
              <div class="muted" id="group-empty">No groups yet</div>
            </div>
          </div>

          <div class="settings-section" data-section="import">
            <div class="form-stack">
              <label class="field">
                <span>JSON File</span>
                <input type="file" id="import-file" accept=".json,application/json" />
              </label>
              <label class="field">
                <span>Mode</span>
                <select id="import-mode">
                  <option value="merge" selected>Merge (add/update)</option>
                  <option value="replace">Replace (wipe existing)</option>
                </select>
              </label>
              <div class="apply-row">
                <button class="btn" id="btn-import-json">Import JSON</button>
              </div>
              <div class="panel" id="import-result">Supported formats: Stream JSON, M3U</div>
            </div>
          </div>

          <div class="settings-section" data-section="edit-config">
            <div class="panel">
              <div class="panel-title-row">
                <div class="panel-title">Edit Config</div>
                <div class="panel-actions">
                  <select id="config-edit-mode" title="Import mode">
                    <option value="replace" selected>Replace</option>
                    <option value="merge">Merge</option>
                  </select>
                  <button class="btn ghost" type="button" id="btn-config-load">Refresh</button>
                  <button class="btn" type="button" id="btn-config-save">Save &amp; Apply</button>
                </div>
              </div>
              <textarea class="code-editor" id="config-editor" spellcheck="false" wrap="off"></textarea>
              <div class="form-hint" id="config-edit-hint">
                Full config (users, settings, streams, adapters, softcam, splitters). Save applies immediately.
              </div>
            </div>
          </div>

          <div class="settings-section" data-section="config-history">
            <div class="panel">
              <div class="panel-title-row">
                <div class="panel-title">Config History</div>
                <div class="panel-actions">
                  <button class="btn ghost" type="button" id="btn-config-refresh">Refresh</button>
                  <button class="btn ghost" type="button" id="btn-config-delete-all">Delete All</button>
                </div>
              </div>
              <div class="muted config-history-meta">
                Active revision: <span id="config-active-revision">-</span>
                Â· LKG: <span id="config-lkg-revision">-</span>
              </div>
              <div class="table" id="config-history-table">
                <div class="table-row header">
                  <div>ID</div>
                  <div>Status</div>
                  <div>User</div>
                  <div>Comment</div>
                  <div>Created</div>
                  <div>Applied</div>
                  <div>Error</div>
                  <div></div>
                </div>
                <div class="table-row">
                  <div class="muted">No revisions yet</div>
                </div>
              </div>
            </div>
          </div>

          <div class="settings-section" data-section="license">
            <div class="panel">
              <div class="panel-title">License</div>
              <div class="muted" id="license-meta">Loading...</div>
              <pre class="code-block" id="license-text">Loading...</pre>
            </div>
          </div>

          <div class="settings-section" data-section="restart">
            <div class="panel">
              <div class="apply-row">
                <button class="btn" id="btn-restart">Reload (safe)</button>
              </div>
              <div class="muted">
                Uses a soft reload. Hard restart is available only with a supervisor.
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="view" id="view-logs">
        <div class="log-toolbar">
          <div class="log-filters">
            <select id="log-level-filter">
              <option value="all">All levels</option>
              <option value="info">Info</option>
              <option value="warning">Warning</option>
              <option value="error">Error</option>
              <option value="debug">Debug</option>
            </select>
            <input type="text" id="log-stream-filter" placeholder="Stream id..." />
            <input type="text" id="log-text-filter" placeholder="Filter logs..." />
            <label class="session-limit log-limit">
              <span>Limit</span>
              <select id="log-limit">
                <option value="100">100</option>
                <option value="200">200</option>
                <option value="500" selected>500</option>
                <option value="1000">1000</option>
              </select>
            </label>
          </div>
          <div class="log-count muted">Shown: <span id="log-count">0</span></div>
          <button class="link-btn" id="log-pause">Pause</button>
          <button class="link-btn" id="log-clear">Clear</button>
        </div>
        <pre class="log-output" id="log-output">No logs yet.</pre>
      </section>

      <section class="view" id="view-help">
        <div class="panel">
          <div class="panel-title">Help</div>
          <div class="panel-body">
	            <div class="help-guide-card" id="help-guide-card">
	              <div class="help-guide-title">Ð§Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ Stream Hub</div>
              <div class="help-guide-short" id="help-guide-short"></div>
              <div class="help-guide-actions">
                <button class="btn ghost" type="button" id="help-guide-toggle">ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ð¾Ð»Ð½ÑƒÑŽ ÑÐ¿Ñ€Ð°Ð²ÐºÑƒ</button>
              </div>
              <div class="help-guide-long" id="help-guide-long" hidden></div>
            </div>

	            <details class="help-ai-details" id="help-ai-details">
	              <summary>StreamAI Chat (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)</summary>
              <div class="help-intro">
                <p class="muted">ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð½Ð° Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÑƒ Ð¸Ð»Ð¸ Ð½Ð°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð·Ð°Ð¿Ñ€Ð¾Ñ. Ð¡Ð¿Ñ€Ð°Ð²ÐºÐ°: <code>/help</code>.</p>
              </div>
              <div class="help-bubbles" id="help-bubbles">
                <div class="help-bubble">help</div>
                <div class="help-bubble">error ch</div>
                <div class="help-bubble">make mpts</div>
                <div class="help-bubble">delete all disable channel</div>
                <div class="help-bubble">transcode all stream</div>
                <div class="help-bubble">update channel names</div>
              </div>
              <div class="ai-chat" id="ai-chat">
                <div class="ai-chat-log" id="ai-chat-log"></div>
                <label class="field">
                  <span>Message</span>
                  <textarea id="ai-chat-input" rows="3" placeholder="Describe the task or ask for analysis..."></textarea>
                </label>
                <div class="ai-chat-attachments">
                  <label class="btn ghost ai-chat-file-btn">
                    <input type="file" id="ai-chat-files" accept="image/*" multiple />
                    <span>Attach images</span>
                  </label>
                  <div class="ai-chat-files" id="ai-chat-files-label">No attachments</div>
                </div>
                <div class="ai-chat-file-previews" id="ai-chat-file-previews"></div>
                <div class="ai-chat-actions">
                  <button class="btn" type="button" id="ai-chat-send">Send</button>
                </div>
                <div class="form-note" id="ai-chat-status"></div>
              </div>
	              <div class="help-ai-disabled" id="help-ai-disabled" hidden>
	                StreamAI Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½ Ð² Settings â†’ General. Ð‘Ð»Ð¾Ðº Ñ‡Ð°Ñ‚Ð° Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½.
	              </div>
            </details>

            <div class="help-guide-footer">
              Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚Ðµ: ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Stream, Ð´Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Input, Ð²ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ Output, Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ Analyze.
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div class="overlay" id="login-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-title">Sign in</div>
      <p class="modal-sub">Default credentials: admin / admin</p>
      <form id="login-form">
        <label class="field">
          <span>Username</span>
          <input type="text" id="login-user" autocomplete="username" required />
        </label>
        <label class="field">
          <span>Password</span>
          <input type="password" id="login-pass" autocomplete="current-password" required />
        </label>
        <button class="btn full" type="submit">Sign in</button>
        <div class="form-note" id="login-error"></div>
      </form>
    </div>
  </div>

  <div class="overlay" id="user-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div>
          <div class="modal-title" id="user-title">User</div>
        </div>
        <button class="icon-btn" id="user-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <form id="user-form">
        <label class="field" id="user-field-username">
          <span>Username</span>
          <input type="text" id="user-username" autocomplete="username" required />
        </label>
        <label class="field">
          <span>New password</span>
          <input type="password" id="user-password" autocomplete="new-password" />
        </label>
        <label class="checkline" id="user-field-admin">
          <input type="checkbox" id="user-admin" />
          <span>Administrator</span>
        </label>
        <label class="checkline" id="user-field-enabled">
          <input type="checkbox" id="user-enabled" checked />
          <span>Enabled</span>
        </label>
        <label class="field" id="user-field-comment">
          <span>Comment</span>
          <input type="text" id="user-comment" />
        </label>
        <div class="apply-row user-actions">
          <button class="btn" type="submit">Save</button>
          <button class="btn ghost" type="button" id="user-cancel">Cancel</button>
        </div>
        <div class="form-note" id="user-error"></div>
      </form>
    </div>
  </div>

  <div class="overlay" id="editor-overlay" aria-hidden="true">
    <div class="modal wide">
      <div class="modal-head">
        <div>
        <div class="modal-title" id="editor-title">Stream settings</div>
        </div>
        <button class="icon-btn" id="editor-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>

      <div class="tabbar">
        <button class="tab active" data-tab="general" data-tab-scope="stream-editor">General</button>
        <button class="tab" data-tab="groups" data-tab-scope="stream-editor">Groups</button>
        <button class="tab" data-tab="service" data-tab-scope="stream-editor">Service</button>
        <button class="tab" data-tab="remap" data-tab-scope="stream-editor">Remap</button>
        <button class="tab" data-tab="mpts" data-tab-scope="stream-editor">MPTS</button>
        <button class="tab" data-tab="backup" data-tab-scope="stream-editor">Backup</button>
        <button class="tab" data-tab="transcode" data-tab-scope="stream-editor">Transcode</button>
        <button class="tab" data-tab="epg" data-tab-scope="stream-editor">EPG</button>
        <button class="tab" data-tab="advanced" data-tab-scope="stream-editor">Advanced</button>
      </div>

      <form id="stream-form">
        <div class="modal-body-scroll">
        <div class="tab-content active" data-tab-content="general" data-tab-scope="stream-editor">
          <label class="checkline">
            <input type="checkbox" id="stream-enabled" checked />
            <span>Enable</span>
          </label>

          <div class="form-grid stream-general-grid">
            <label class="field span-6">
              <span>Name</span>
              <input type="text" id="stream-name" required />
            </label>

            <label class="field span-6">
              <span>ID</span>
              <input type="text" id="stream-id" required />
            </label>
          </div>

          <div class="stream-general-row">
            <div class="form-subsection stream-transcode-setting" id="stream-transcode-general">
              <div class="stream-transcode-setting-main">
                <div class="stream-transcode-setting-title">Transcoding</div>
                <div class="stream-transcode-setting-sub">
                  <div class="stream-transcode-setting-subtitle">Audio Fix</div>
                  <div class="stream-transcode-setting-subhint">Fix common audio issues (sync/dropouts/pauses).</div>
                </div>
              </div>
              <div class="stream-transcode-setting-controls">
                <div class="stream-transcode-setting-row">
                  <label class="stream-transcode-toggle" for="stream-transcode-enabled">
                    <span class="switch-text">Enable transcoding</span>
                    <span class="switch">
                      <input type="checkbox" id="stream-transcode-enabled" role="switch" aria-label="Enable transcoding"
                        aria-checked="false" />
                      <span class="switch-slider"></span>
                    </span>
                  </label>
                  <span class="pill stream-transcode-status-pill is-disabled" id="stream-transcode-status-pill"
                    aria-live="polite">Disabled</span>
                </div>
                <div class="stream-transcode-setting-row stream-audio-fix-controls" id="stream-audio-fix-controls">
                  <button class="pill stream-audio-fix-toggle is-off" type="button" id="btn-stream-audio-fix-toggle"
                    title="Toggle Audio Fix for this stream">Audio Fix: OFF</button>
                  <button class="btn ghost tiny" type="button" id="btn-stream-audio-fix-edit"
                    title="Edit Audio Fix settings">Edit</button>
                </div>
              </div>
            </div>

            <label class="field stream-desc-field">
              <span>Description</span>
              <textarea id="stream-desc" class="textarea-grow" rows="1"></textarea>
            </label>
          </div>

          <label class="checkline">
            <input type="checkbox" id="stream-mpts" />
            <span>Create Multi Program Stream</span>
          </label>

          <div class="list-block" id="stream-input-block">
            <div class="list-header">
              <span>INPUT LIST</span>
              <button class="text-link" type="button" id="btn-add-input">NEW INPUT</button>
            </div>
            <div class="list" id="input-list"></div>
          </div>

            <div class="list-block stream-output-block">
            <div class="list-header">
              <span>OUTPUT LIST</span>
              <div class="list-actions">
                <button class="text-link" type="button" id="btn-add-output">NEW OUTPUT</button>
                <button class="text-link btn-inline-add" type="button" id="btn-add-output-inline">+</button>
              </div>
            </div>
            <div class="list" id="output-list"></div>
          </div>

		          <div class="form-hint stream-transcode-note">
		            When transcoding is enabled, configure outputs (HLS/DASH/HTTP-TS/Embed/UDP/RTP/RTMP/RTSP) in the OUTPUT LIST.
		          </div>
	        </div>

        <div class="tab-content" data-tab-content="groups" data-tab-scope="stream-editor">
          <div class="form-grid">
            <label class="field">
              <span>Group</span>
              <input type="text" id="stream-group" list="stream-group-list" placeholder="news" />
              <datalist id="stream-group-list"></datalist>
            </label>
          </div>
          <div class="form-hint">Used as playlist group-title. Leave empty to skip grouping.</div>
        </div>
        <div class="tab-content" data-tab-content="service" data-tab-scope="stream-editor">
          <div class="form-grid">
            <label class="field">
              <span>Service type</span>
              <input type="number" id="stream-service-type" placeholder="1 (digital TV)" min="0" max="255" />
            </label>
            <label class="field">
              <span>Codepage</span>
              <select id="stream-service-codepage">
                <option value="">Auto (default)</option>
                <option value="ISO-8859-1">ISO-8859-1 (Latin-1)</option>
                <option value="ISO-8859-5">ISO-8859-5 (Cyrillic)</option>
                <option value="UTF-8">UTF-8</option>
              </select>
            </label>
          </div>
          <div class="form-grid">
            <label class="field">
              <span>Provider</span>
              <input type="text" id="stream-service-provider" placeholder="Provider name" />
            </label>
            <label class="field">
              <span>Service name</span>
              <input type="text" id="stream-service-name" placeholder="Service name" />
            </label>
          </div>
          <label class="field">
            <span>HbbTV URL</span>
            <input type="text" id="stream-service-hbbtv" placeholder="http://example.com/app" />
          </label>
          <label class="checkline">
            <input type="checkbox" id="stream-service-cas" />
            <span>Conditional Access (CAT/ECM/EMM)</span>
          </label>
        </div>
        <div class="tab-content" data-tab-content="remap" data-tab-scope="stream-editor">
          <div class="form-grid">
            <label class="field">
              <span>Set PNR</span>
              <input type="number" id="stream-set-pnr" placeholder="Leave empty to keep" />
            </label>
            <label class="field">
              <span>Set TSID</span>
              <input type="number" id="stream-set-tsid" placeholder="Leave empty to keep" />
            </label>
            <label class="field">
              <span>PID map</span>
              <input type="text" id="stream-map" placeholder="pmt=100,video=101,eng=102" />
            </label>
            <label class="field">
              <span>Filter PIDs</span>
              <input type="text" id="stream-filter" placeholder="101,102,103" />
            </label>
            <label class="field">
              <span>Filter exclude PIDs</span>
              <input type="text" id="stream-filter-exclude" placeholder="201,202,203" />
            </label>
          </div>
        </div>
	        <div class="tab-content" data-tab-content="mpts" data-tab-scope="stream-editor">
	          <div class="mpts-manual is-collapsed" id="mpts-manual">
	            <div class="mpts-manual-header">
	              <div>
	                <div class="panel-title">MPTS Manual</div>
	                <div class="mpts-status" id="mpts-enabled-status">Status: Disabled</div>
	              </div>
	              <div class="mpts-manual-actions">
	                <button class="btn ghost" type="button" id="btn-mpts-manual-toggle" aria-expanded="false">Show manual</button>
	                <button class="btn" type="button" id="btn-mpts-enable">Enable MPTS</button>
	              </div>
	            </div>
	            <div class="mpts-manual-body">
	              <div class="mpts-manual-step">1) Enable MPTS for the stream (button above or â€œCreate Multi Program Streamâ€ on General tab).</div>
	              <div class="mpts-manual-step">2) Add services in the list below. Each service needs its own input URL (UDP or stream://).</div>
	              <div class="mpts-manual-step">2a) You can use â€œConvert inputsâ€ or â€œAdd from streamsâ€ to build the service list fast.</div>
	              <div class="mpts-manual-step">2a) Ð”Ð»Ñ UDP Ð¼Ð¾Ð¶Ð½Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ â€œProbe inputâ€ â€” ÑÐµÑ€Ð²Ð¸ÑÑ‹ Ð¿Ð¾Ð´Ñ‚ÑÐ½ÑƒÑ‚ÑÑ Ð¸Ð· PAT/SDT.</div>
	              <div class="mpts-manual-step">3) Set PNR/LCN/provider/service name and (optionally) service type.</div>
	              <div class="mpts-manual-step">4) Configure NIT/PSI and advanced options (auto-remap, PCR restamp, pass-through).</div>
	              <div class="mpts-manual-step">5) Configure outputs on the General tab and click Apply/Save.</div>
	            </div>
	            <div class="mpts-manual-note">
	              Tip: You can multiplex existing streams via <code>stream://stream_id</code>.
	            </div>
	          </div>
	          <div class="mpts-runtime" id="mpts-runtime">
            <div class="panel-title">MPTS Runtime</div>
            <div class="mpts-runtime-grid">
              <div class="mpts-runtime-card">
                <div class="mpts-runtime-label">Bitrate</div>
                <div class="mpts-runtime-value" id="mpts-runtime-bitrate">-</div>
              </div>
              <div class="mpts-runtime-card">
                <div class="mpts-runtime-label">Null stuffing</div>
                <div class="mpts-runtime-value" id="mpts-runtime-null">-</div>
              </div>
              <div class="mpts-runtime-card">
                <div class="mpts-runtime-label">PSI interval</div>
                <div class="mpts-runtime-value" id="mpts-runtime-psi">-</div>
              </div>
	            </div>
	            <div class="mpts-runtime-note" id="mpts-runtime-note">Stats update on status polling.</div>
	          </div>
	          <div class="mpts-callout is-hidden" id="mpts-callout">
	            <div class="mpts-callout-text" id="mpts-callout-text">
	              MPTS settings are locked until MPTS is enabled for this stream.
	            </div>
	            <div class="mpts-callout-actions">
	              <button class="btn ghost" type="button" id="btn-mpts-enable-callout">Enable MPTS</button>
	            </div>
	          </div>
	          <div class="form-subsection mpts-section">
	            <div class="panel-title">General</div>
	            <div class="form-grid">
	              <label class="field">
	                <span>Country (ISO 3166-1 alpha-3)</span>
	                <input type="text" id="mpts-country" class="mpts-field" placeholder="USA" />
	              </label>
	              <label class="field">
	                <span>UTC offset (minutes)</span>
	                <input type="number" id="mpts-utc-offset" class="mpts-field" placeholder="0" />
	              </label>
	              <label class="field">
	                <span>DST time of change (UTC)</span>
	                <input type="text" id="mpts-dst-time-of-change" class="mpts-field" placeholder="2026-03-29T01:00:00Z" />
	              </label>
	              <label class="field">
	                <span>DST next offset (minutes)</span>
	                <input type="number" id="mpts-dst-next-offset" class="mpts-field" placeholder="0" />
	              </label>
	              <label class="field">
	                <span>Network ID</span>
	                <input type="number" id="mpts-network-id" class="mpts-field" placeholder="1" />
	              </label>
	              <label class="field">
                <span>Network name</span>
                <input type="text" id="mpts-network-name" class="mpts-field" placeholder="My Network" />
              </label>
              <label class="field">
                <span>Provider name</span>
                <input type="text" id="mpts-provider-name" class="mpts-field" placeholder="Provider" />
              </label>
              <label class="field">
                <span>Codepage</span>
                <select id="mpts-codepage" class="mpts-field">
                  <option value="">Auto (default)</option>
                  <option value="ISO-8859-1">ISO-8859-1 (Latin-1)</option>
                  <option value="ISO-8859-5">ISO-8859-5 (Cyrillic)</option>
                  <option value="UTF-8">UTF-8</option>
                </select>
              </label>
              <label class="field">
                <span>TSID</span>
                <input type="number" id="mpts-tsid" class="mpts-field" placeholder="1" />
              </label>
              <label class="field">
                <span>ONID</span>
                <input type="number" id="mpts-onid" class="mpts-field" placeholder="1" />
              </label>
            </div>
          </div>
	          <div class="form-subsection mpts-section">
	            <div class="panel-title">Services</div>
            <div class="form-grid">
              <label class="field">
                <span>Bulk PNR start</span>
                <input type="number" id="mpts-bulk-pnr-start" class="mpts-field" placeholder="1001" />
              </label>
              <label class="field">
                <span>Bulk PNR step</span>
                <input type="number" id="mpts-bulk-pnr-step" class="mpts-field" placeholder="1" />
              </label>
              <label class="field">
                <span>Bulk LCN start</span>
                <input type="number" id="mpts-bulk-lcn-start" class="mpts-field" placeholder="1" />
              </label>
              <label class="field">
                <span>Bulk LCN step</span>
                <input type="number" id="mpts-bulk-lcn-step" class="mpts-field" placeholder="1" />
              </label>
              <label class="field">
                <span>Bulk provider</span>
                <input type="text" id="mpts-bulk-provider" class="mpts-field" placeholder="Provider" />
              </label>
              <label class="field">
                <span>Bulk service type</span>
                <input type="number" id="mpts-bulk-service-type" class="mpts-field" placeholder="1" min="0" max="255" />
              </label>
              <label class="field">
                <span>&nbsp;</span>
                <button class="btn mpts-field" type="button" id="btn-mpts-bulk-apply">Apply to all services</button>
              </label>
            </div>
	            <div class="list-block">
	              <div class="list-header">
	                <span>SERVICE LIST</span>
	                <div class="list-actions">
	                  <button class="text-link mpts-field" type="button" id="btn-mpts-convert-inputs">CONVERT INPUTS</button>
	                  <button class="text-link mpts-field" type="button" id="btn-mpts-add-streams">ADD FROM STREAMS</button>
	                  <button class="text-link mpts-field" type="button" id="btn-mpts-probe">PROBE INPUT</button>
	                  <button class="text-link mpts-field" type="button" id="btn-add-mpts-service">NEW SERVICE</button>
	                </div>
	              </div>
	              <div class="list" id="mpts-service-list"></div>
            </div>
            <div class="form-hint">Each service defines its own input, PNR, and service labels.</div>
            <div class="form-hint is-hidden" id="mpts-pnr-warning"></div>
            <div class="form-hint is-hidden" id="mpts-pnr-missing"></div>
            <div class="form-hint is-hidden" id="mpts-dup-input-warning"></div>
            <div class="form-hint is-hidden" id="mpts-spts-warning"></div>
          </div>
	          <div class="form-subsection mpts-section">
	            <div class="panel-title">NIT</div>
	            <div class="form-grid">
	              <label class="field">
	                <span>Delivery system</span>
	                <select id="mpts-delivery" class="mpts-field">
	                  <option value="">Auto</option>
	                  <option value="dvb-t">DVB-T</option>
	                  <option value="dvb-c">DVB-C</option>
	                  <option value="dvb-s">DVB-S</option>
	                  <option value="atsc">ATSC</option>
	                </select>
	              </label>
	              <div class="form-hint">
	                ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÑŽÑ‚ÑÑ: DVB-C (0x44), DVB-T (0x5A), DVB-S/S2 (0x43). ÐžÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ‚Ð¸Ð¿Ñ‹ Ð·Ð°Ñ€ÐµÐ·ÐµÑ€Ð²Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹.
	              </div>
	              <label class="field">
	                <span>Frequency (kHz)</span>
	                <input type="number" id="mpts-frequency" class="mpts-field" placeholder="650000" />
	              </label>
	              <label class="field mpts-nit-sat-cable">
	                <span>Symbol rate (kSymbols/s)</span>
	                <input type="number" id="mpts-symbolrate" class="mpts-field" placeholder="6875" />
	              </label>
	              <label class="field mpts-nit-dvbt is-hidden">
	                <span>Bandwidth (MHz)</span>
	                <input type="number" id="mpts-bandwidth" class="mpts-field" placeholder="8" min="5" max="8" />
	              </label>
	              <label class="field mpts-nit-sat-only is-hidden">
	                <span>Orbital position</span>
	                <input type="text" id="mpts-orbital-position" class="mpts-field" placeholder="19.2E" />
	              </label>
	              <label class="field mpts-nit-sat-only is-hidden">
	                <span>Polarization</span>
	                <select id="mpts-polarization" class="mpts-field">
	                  <option value="">Auto (H)</option>
	                  <option value="H">H (Horizontal)</option>
	                  <option value="V">V (Vertical)</option>
	                  <option value="L">L (Left)</option>
	                  <option value="R">R (Right)</option>
	                </select>
	              </label>
	              <label class="field mpts-nit-sat-only is-hidden">
	                <span>Rolloff</span>
	                <select id="mpts-rolloff" class="mpts-field">
	                  <option value="">Auto (0.35)</option>
	                  <option value="0.35">0.35</option>
	                  <option value="0.25">0.25</option>
	                  <option value="0.20">0.20</option>
	                </select>
	              </label>
	              <label class="field mpts-nit-sat-cable">
	                <span>FEC</span>
	                <select id="mpts-fec" class="mpts-field">
	                  <option value="">Auto</option>
	                  <option value="1/2">1/2</option>
                  <option value="2/3">2/3</option>
                  <option value="3/4">3/4</option>
                  <option value="5/6">5/6</option>
	                  <option value="7/8">7/8</option>
	                </select>
	              </label>
	              <label class="field mpts-nit-sat-cable">
	                <span>Modulation</span>
	                <select id="mpts-modulation" class="mpts-field">
	                  <option value="">Auto</option>
	                  <option value="qpsk">QPSK</option>
                  <option value="8psk">8PSK</option>
                  <option value="16qam">16-QAM</option>
                  <option value="64qam">64-QAM</option>
                  <option value="256qam">256-QAM</option>
                </select>
              </label>
              <label class="field">
                <span>Network search (stream IDs)</span>
                <input type="text" id="mpts-network-search" class="mpts-field" placeholder="mpts_a,mpts_b" />
              </label>
              <label class="field">
                <span>LCN descriptor tag</span>
                <input type="text" id="mpts-lcn-tag" class="mpts-field" placeholder="0x83" />
              </label>
              <label class="field">
                <span>LCN descriptor tags (comma)</span>
                <input type="text" id="mpts-lcn-tags" class="mpts-field" placeholder="0x83,0x87" />
              </label>
              <label class="field">
                <span>LCN version (optional)</span>
                <input type="number" id="mpts-lcn-version" class="mpts-field" min="0" max="31" placeholder="0..31" />
              </label>
            </div>
	            <div class="form-hint is-hidden" id="mpts-delivery-warning"></div>
	            <div class="form-hint is-hidden" id="mpts-lcn-tags-warning"></div>
	            <div class="form-hint is-hidden" id="mpts-lcn-version-warning"></div>
	            <div class="form-hint">Delivery descriptor Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ DVB-C/DVB-T/DVB-S. Ð”Ð»Ñ Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ñ‚Ð¸Ð¿Ð¾Ð² Ð¿Ð¾Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ, Ð½Ð¾ Ð½Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ.</div>
	            <div class="form-hint">LCN Ð·Ð°Ð´Ð°Ñ‘Ñ‚ÑÑ Ð² ÑÐ¿Ð¸ÑÐºÐµ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²; tag 0x83 (NorDig) Ð¸Ð»Ð¸ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ñ‹Ðµ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹.</div>
	            <div class="form-hint">Ð•ÑÐ»Ð¸ Ð·Ð°Ð´Ð°Ð½ ÑÐ¿Ð¸ÑÐ¾Ðº LCN tags, Ð¾Ð´Ð¸Ð½Ð¾Ñ‡Ð½Ñ‹Ð¹ LCN tag Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÑ‚ÑÑ.</div>
	            <div class="form-hint">LCN version Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¸ Ð¿ÐµÑ€ÐµÐ¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ NIT version, ÐµÑÐ»Ð¸ Ð¾Ð½ Ð½Ðµ Ð·Ð°Ð´Ð°Ð½.</div>
	          </div>
	          <details class="form-subsection mpts-section fold">
	            <summary class="fold-summary">Advanced</summary>
	            <div class="fold-body">
            <div class="form-grid">
              <label class="field">
                <span>SI interval (ms)</span>
                <input type="number" id="mpts-si-interval" class="mpts-field" placeholder="500" min="50" />
              </label>
              <label class="field">
                <span>Target bitrate (bps)</span>
                <input type="number" id="mpts-target-bitrate" class="mpts-field" placeholder="50000000" min="1" step="1000" />
              </label>
              <label class="checkline">
                <input type="checkbox" id="mpts-auto-probe" class="mpts-field" />
                <span>Auto-probe services from input</span>
              </label>
              <label class="field">
                <span>Auto-probe duration (sec)</span>
                <input type="number" id="mpts-auto-probe-duration" class="mpts-field" placeholder="3" min="1" max="10" />
              </label>
              <label class="checkline">
                <input type="checkbox" id="mpts-pcr-restamp" class="mpts-field" />
                <span>PCR restamp</span>
              </label>
            <label class="checkline">
              <input type="checkbox" id="mpts-pcr-smoothing" class="mpts-field" />
              <span>PCR smoothing (EWMA)</span>
            </label>
              <label class="field">
                <span>PCR smooth alpha</span>
                <input type="text" id="mpts-pcr-smooth-alpha" class="mpts-field" placeholder="0.1" />
              </label>
              <label class="field">
                <span>PCR smooth max offset (ms)</span>
                <input type="number" id="mpts-pcr-smooth-max" class="mpts-field" placeholder="500" />
              </label>
              <div class="form-hint">PCR smoothing Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ PCR restamp.</div>
              <label class="field">
                <span>PAT version</span>
                <input type="number" id="mpts-pat-version" class="mpts-field" placeholder="0" />
              </label>
              <label class="field">
                <span>NIT version</span>
                <input type="number" id="mpts-nit-version" class="mpts-field" placeholder="0" />
              </label>
              <label class="field">
                <span>CAT version</span>
                <input type="number" id="mpts-cat-version" class="mpts-field" placeholder="0" />
              </label>
              <label class="field">
                <span>SDT version</span>
                <input type="number" id="mpts-sdt-version" class="mpts-field" placeholder="0" />
              </label>
            </div>
            <div class="form-hint">Target bitrate Ð½Ð¸Ð¶Ðµ Ð²Ñ…Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¸Ð²ÐµÐ´Ñ‘Ñ‚ Ðº Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸ÑŽ (CBR Ð½Ðµ Ð²Ñ‹Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ).</div>
            <div class="form-hint">CAT Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ð¸Ð· ÑÐ¿Ð¸ÑÐºÐ° CA Ð½Ð¸Ð¶Ðµ (ÐµÑÐ»Ð¸ Pass CAT Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½).</div>
            <label class="checkline">
              <input type="checkbox" id="mpts-disable-autoremap" class="mpts-field" />
              <span>Disable PID auto-remap</span>
            </label>
            <div class="form-hint">SI interval &lt; 50ms Ð¸ target bitrate â‰¤ 0 Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ.</div>
            <div class="form-hint is-hidden" id="mpts-autoremap-warning">
              Auto-remap Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½: ÑÐ»ÐµÐ´Ð¸Ñ‚Ðµ Ð·Ð° PID/PNR. ÐšÐ¾Ð½Ñ„Ð»Ð¸ÐºÑ‚Ñ‹ Ð¿Ñ€Ð¸Ð²ÐµÐ´ÑƒÑ‚ Ðº Ð¾ÑˆÐ¸Ð±ÐºÐ°Ð¼ ÑÐ±Ð¾Ñ€ÐºÐ¸ MPTS.
            </div>
            <div class="form-hint" id="mpts-autoremap-note">
              Auto-remap Ð½Ð°Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ PID Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾, Ð½Ð°Ñ‡Ð¸Ð½Ð°Ñ Ñ 0x0020.
            </div>
            <label class="checkline">
              <input type="checkbox" id="mpts-pass-nit" class="mpts-field" />
              <span>Pass NIT</span>
            </label>
            <label class="checkline">
              <input type="checkbox" id="mpts-pass-sdt" class="mpts-field" />
              <span>Pass SDT</span>
            </label>
            <label class="checkline">
              <input type="checkbox" id="mpts-pass-eit" class="mpts-field" />
              <span>Pass EIT</span>
            </label>
            <label class="checkline">
              <input type="checkbox" id="mpts-pass-cat" class="mpts-field" />
              <span>Pass CAT</span>
            </label>
	            <label class="checkline">
	              <input type="checkbox" id="mpts-pass-tdt" class="mpts-field" />
	              <span>Pass TDT</span>
	            </label>
	            <label class="checkline">
	              <input type="checkbox" id="mpts-disable-tot" class="mpts-field" />
	              <span>Disable TOT (send TDT only)</span>
	            </label>
	            <div class="form-hint">Pass EIT Ð±ÐµÑ€Ñ‘Ñ‚ÑÑ Ð¸Ð· Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²Ð¸ÑÐ° Ð¸ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÑ‚ÑÑ Ð¿Ð¾ service_id. Pass CAT Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ ÐºÐ°Ðº ÐµÑÑ‚ÑŒ.</div>
	            <label class="field">
	              <span>EIT source (service #)</span>
	              <input type="number" id="mpts-eit-source" class="mpts-field" placeholder="1" min="1" />
	            </label>
	            <label class="field">
	              <span>EIT table IDs (optional)</span>
	              <input type="text" id="mpts-eit-table-ids" class="mpts-field" placeholder="0x4E,0x50-0x5F" />
	            </label>
	            <label class="field">
	              <span>CAT source (service #)</span>
	              <input type="number" id="mpts-cat-source" class="mpts-field" placeholder="1" min="1" />
	            </label>
            <label class="checkline">
              <input type="checkbox" id="mpts-strict-pnr" class="mpts-field" />
              <span>Strict PNR</span>
            </label>
            <label class="checkline">
              <input type="checkbox" id="mpts-spts-only" class="mpts-field" />
              <span>SPTS only (reject multi-PAT)</span>
            </label>
            <div class="form-hint">SPTS only Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÑÐµÑ‚ Ð²Ñ…Ð¾Ð´Ñ‹ Ñ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ð¼Ð¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð°Ð¼Ð¸.</div>
            <div class="form-hint">
              Strict PNR Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÑÐµÑ‚ Ð²Ñ…Ð¾Ð´Ñ‹ Ñ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ð¼Ð¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð°Ð¼Ð¸, ÐµÑÐ»Ð¸ PNR Ð½Ðµ Ð·Ð°Ð´Ð°Ð½.
            </div>
	          </div>
	          </details>
	          <details class="form-subsection mpts-section fold">
	            <summary class="fold-summary">CAT / CA</summary>
	            <div class="fold-body">
            <div class="form-hint">ÐÐ°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÐµÑ‚ CA_descriptors Ð² CAT (EMM PID). Ð­Ñ‚Ð¾ Ð½Ðµ ÑÐ¾Ð·Ð´Ð°Ñ‘Ñ‚ CA Ð¿Ð¾Ñ‚Ð¾Ðº, Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ð±ÑŠÑÐ²Ð»ÑÐµÑ‚ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð² SI.</div>
            <div class="list-header">
              <span>CA DESCRIPTORS</span>
              <button class="text-link mpts-field" type="button" id="btn-add-mpts-ca">NEW CA</button>
            </div>
            <div class="list" id="mpts-ca-list"></div>
            <div class="form-hint">CAID: 0..65535, CA PID: 0..8190, private_data: hex ÑÑ‚Ñ€Ð¾ÐºÐ° (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾).</div>
	          </div>
	          </details>
          <div class="form-hint mpts-pass-warning is-hidden" id="mpts-pass-warning">
            Pass NIT/SDT/EIT/TDT ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚ÐµÐ½ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²Ð¸ÑÐ°.
          </div>
          <div class="form-hint">MPTS settings are applied only when MPTS is enabled.</div>
          <div class="form-hint">Auto-probe Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¿ÑƒÑÑ‚Ð¾Ð¼ ÑÐ¿Ð¸ÑÐºÐµ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð² Ð¸ Ð´Ð»Ñ UDP/RTP inputs.</div>
          <div class="form-hint">Use stream inputs like <code>stream://stream_id</code> to build a multiplex.</div>
        </div>
        <div class="tab-content" data-tab-content="backup" data-tab-scope="stream-editor">
          <div class="form-grid">
            <label class="field">
              <span>Backup mode</span>
              <select id="stream-backup-type">
                <option value="">Default (active)</option>
                <option value="disabled">Disabled</option>
                <option value="passive">Passive</option>
                <option value="active">Active</option>
                <option value="active_stop_if_all_inactive">Active + stop if all inactive</option>
              </select>
            </label>
            <label class="field backup-field backup-warm-max">
              <span>Active warm inputs max</span>
              <input type="number" id="stream-backup-warm-max" placeholder="Default: 2" />
            </label>
            <label class="field">
              <span>Initial delay (sec)</span>
              <input type="number" id="stream-backup-initial-delay" placeholder="Auto" />
            </label>
            <label class="field">
              <span>Start delay (sec)</span>
              <input type="number" id="stream-backup-start-delay" placeholder="Default: 5" />
            </label>
            <label class="field backup-field backup-return-delay">
              <span>Return delay (sec)</span>
              <input type="number" id="stream-backup-return-delay" placeholder="Default: 10" />
            </label>
            <label class="field backup-field backup-stop-inactive">
              <span>Stop if all inactive (sec)</span>
              <input type="number" id="stream-backup-stop-inactive-sec" placeholder="Default: 20" />
            </label>
            <label class="field">
              <span>Stable OK (sec)</span>
              <input type="number" id="stream-stable-ok-sec" placeholder="Default: 5" />
            </label>
            <label class="field">
              <span>No data timeout (sec)</span>
              <input type="number" id="stream-no-data-timeout-sec" placeholder="Default: 3" />
            </label>
            <label class="field">
              <span>Probe interval (sec)</span>
              <input type="number" id="stream-probe-interval-sec" placeholder="Default: 3" />
            </label>
          </div>
          <div class="form-hint">
            If backup mode is empty and input list has &gt;1 item, active mode is used by default.
          </div>
        </div>
        <div class="tab-content" data-tab-content="transcode" data-tab-scope="stream-editor">
          <div class="form-subsection">
            <div class="form-grid">
              <label class="field span-6">
                <span>Preset</span>
                <select id="stream-transcode-preset" disabled>
                  <option value="">Custom</option>
                  <option value="cpu_1080p">CPU 1080p (H.264/AAC)</option>
                  <option value="cpu_720p">CPU 720p (H.264/AAC)</option>
                  <option value="cpu_540p">CPU 540p (H.264/AAC)</option>
                  <option value="nvidia_1080p">NVIDIA 1080p (H.264/AAC)</option>
                  <option value="nvidia_720p">NVIDIA 720p (H.264/AAC)</option>
                  <option value="nvidia_540p">NVIDIA 540p (H.264/AAC)</option>
                  <option value="nvidia_ladder_2">NVIDIA 2 profiles (720+540)</option>
                  <option value="nvidia_ladder_3">NVIDIA 3 profiles (720+540+360)</option>
                </select>
              </label>
              <div class="field span-6">
                <span>Apply</span>
                <button class="btn ghost" type="button" id="stream-transcode-preset-apply" disabled>Apply</button>
              </div>
            </div>
            <div class="form-hint">Apply preset overwrites transcoding profiles. Publish outputs are configured in the OUTPUT LIST (General tab).</div>
          </div>

          <div class="form-subsection pngts-block" id="stream-pngts-block">
            <div class="pngts-header">
              <div class="pngts-title">PNG to Stream</div>
              <div class="form-hint">Generate a reserve MPEG-TS from a PNG and audio for backup inputs.</div>
            </div>
            <div class="form-grid">
              <label class="field">
                <span>PNG file</span>
                <input type="file" id="pngts-image-file" accept="image/png" />
              </label>
              <label class="field">
                <span>Source URL (for analyze)</span>
                <input type="text" id="pngts-source-url" placeholder="auto from input #1" />
              </label>
            </div>
            <div class="form-grid pngts-audio-grid">
              <label class="field">
                <span>Audio mode</span>
                <select id="pngts-audio-mode">
                  <option value="silence">Silence</option>
                  <option value="beep">Beep</option>
                  <option value="mp3">MP3 file</option>
                </select>
              </label>
              <label class="field" id="pngts-beep-field">
                <span>Beep preset</span>
                <select id="pngts-beep-preset">
                  <option value="sine_440">Sine 440 Hz</option>
                  <option value="sine_1000">Sine 1000 Hz</option>
                  <option value="beep_1s">Beep every second</option>
                  <option value="pink_noise">Pink noise</option>
                </select>
              </label>
              <label class="field" id="pngts-mp3-field">
                <span>MP3 file</span>
                <input type="file" id="pngts-mp3-file" accept=".mp3,audio/mpeg" />
              </label>
            </div>
            <details class="fold pngts-advanced">
              <summary class="fold-summary">Output settings</summary>
              <div class="fold-body">
                <div class="form-grid">
                  <label class="field">
                    <span>Video codec</span>
                    <select id="pngts-video-codec">
                      <option value="">Auto (from analyze)</option>
                      <option value="h264">H.264 (libx264)</option>
                      <option value="hevc">HEVC (libx265)</option>
                      <option value="mpeg2">MPEG-2</option>
                    </select>
                  </label>
                  <label class="field">
                    <span>Width</span>
                    <input type="number" id="pngts-video-width" placeholder="Auto" />
                  </label>
                  <label class="field">
                    <span>Height</span>
                    <input type="number" id="pngts-video-height" placeholder="Auto" />
                  </label>
                  <label class="field">
                    <span>FPS</span>
                    <input type="text" id="pngts-video-fps" placeholder="Auto (25)" />
                  </label>
                  <label class="field">
                    <span>Pixel format</span>
                    <input type="text" id="pngts-video-pixfmt" placeholder="yuv420p" />
                  </label>
                  <label class="field">
                    <span>Profile</span>
                    <input type="text" id="pngts-video-profile" placeholder="Auto" />
                  </label>
                  <label class="field">
                    <span>Level</span>
                    <input type="text" id="pngts-video-level" placeholder="Auto" />
                  </label>
                  <label class="field">
                    <span>Video bitrate (optional)</span>
                    <input type="text" id="pngts-video-bitrate" placeholder="5M" />
                  </label>
                  <label class="field">
                    <span>Duration (sec)</span>
                    <input type="number" id="pngts-duration" placeholder="10" min="1" />
                  </label>
                  <label class="field">
                    <span>Output path</span>
                    <input type="text" id="pngts-output-path-input" placeholder="Auto (data/streams/&lt;id&gt;/backup/...)" />
                  </label>
                </div>
              </div>
            </details>
            <div class="pngts-actions">
              <button class="btn ghost" type="button" id="btn-pngts-analyze">Analyze main stream</button>
              <button class="btn primary" type="button" id="btn-pngts-generate">Generate TS</button>
              <button class="btn ghost" type="button" id="btn-pngts-add-backup" disabled>Add to INPUT LIST</button>
            </div>
            <div class="form-hint" id="pngts-status"></div>
            <div class="form-hint pngts-output" id="pngts-output-path"></div>
            <pre class="form-hint form-hint-pre pngts-logs" id="pngts-logs"></pre>
          </div>

          <div class="form-subsection radio-block" id="stream-radio-block">
            <div class="radio-header">
              <div class="radio-title">Create radio (Audio + PNG â†’ UDP TS)</div>
              <div class="form-hint">Generate a live UDP MPEG-TS with static PNG video and audio stream.</div>
            </div>
            <div class="form-grid">
              <label class="field span-6">
                <span>Audio URL</span>
                <input type="text" id="radio-audio-url" placeholder="http://example.com/stream.mp3" />
              </label>
              <label class="field span-6">
                <span>PNG file path</span>
                <input type="text" id="radio-png-path" placeholder="/path/to/logo.png" />
              </label>
            </div>
            <div class="form-grid">
              <label class="checkline">
                <input type="checkbox" id="radio-use-curl" checked />
                <span>Use CURL pipe (recommended for ICY/MP3)</span>
              </label>
              <label class="field">
                <span>User-Agent (optional)</span>
                <input type="text" id="radio-user-agent" placeholder="vlc/3.0.0" />
              </label>
            </div>
            <details class="fold">
              <summary class="fold-summary">Advanced</summary>
              <div class="fold-body">
                <label class="field">
                  <span>Extra headers (one per line)</span>
                  <textarea id="radio-extra-headers" class="textarea-grow" rows="2" placeholder="Authorization: Bearer ..."></textarea>
                </label>
                <div class="form-grid">
                  <label class="field">
                    <span>FPS</span>
                    <input type="number" id="radio-fps" placeholder="25" />
                  </label>
                  <label class="field">
                    <span>Width</span>
                    <input type="number" id="radio-width" placeholder="270" />
                  </label>
                  <label class="field">
                    <span>Height</span>
                    <input type="number" id="radio-height" placeholder="270" />
                  </label>
                  <label class="field">
                    <span>Keep aspect</span>
                    <select id="radio-keep-aspect">
                      <option value="false">No</option>
                      <option value="true">Yes</option>
                    </select>
                  </label>
                  <label class="field">
                    <span>Video codec</span>
                    <input type="text" id="radio-vcodec" placeholder="libx264" />
                  </label>
                  <label class="field">
                    <span>Preset</span>
                    <input type="text" id="radio-preset" placeholder="veryfast" />
                  </label>
                  <label class="field">
                    <span>Video bitrate</span>
                    <input type="text" id="radio-video-bitrate" placeholder="1400k" />
                  </label>
                  <label class="field">
                    <span>GOP</span>
                    <input type="number" id="radio-gop" placeholder="50" />
                  </label>
                  <label class="field">
                    <span>Pixel format</span>
                    <input type="text" id="radio-pixfmt" placeholder="yuv420p" />
                  </label>
                  <label class="field">
                    <span>Tune stillimage</span>
                    <select id="radio-tune-stillimage">
                      <option value="true">Yes</option>
                      <option value="false">No</option>
                    </select>
                  </label>
                  <label class="field">
                    <span>Audio codec</span>
                    <input type="text" id="radio-acodec" placeholder="aac" />
                  </label>
                  <label class="field">
                    <span>Audio bitrate</span>
                    <input type="text" id="radio-audio-bitrate" placeholder="256k" />
                  </label>
                  <label class="field">
                    <span>Channels</span>
                    <input type="number" id="radio-channels" placeholder="2" />
                  </label>
                  <label class="field">
                    <span>Sample rate</span>
                    <input type="number" id="radio-sample-rate" placeholder="48000" />
                  </label>
                  <label class="field">
                    <span>Output UDP URL</span>
                    <input type="text" id="radio-output-url" placeholder="udp://234.1.1.13:1234" />
                  </label>
                  <label class="field">
                    <span>Log file path</span>
                    <input type="text" id="radio-log-path" placeholder="data/streams/&lt;id&gt;/logs/radio.log" />
                  </label>
                  <label class="field">
                    <span>pkt_size</span>
                    <input type="number" id="radio-pkt-size" placeholder="1316" />
                  </label>
                  <label class="field">
                    <span>pcr_period</span>
                    <input type="number" id="radio-pcr-period" placeholder="30" />
                  </label>
                  <label class="field">
                    <span>max_interleave_delta</span>
                    <input type="number" id="radio-max-interleave" placeholder="0" />
                  </label>
                  <label class="field">
                    <span>muxdelay</span>
                    <input type="text" id="radio-muxdelay" placeholder="0.7" />
                  </label>
                </div>
              </div>
            </details>
            <div class="radio-actions">
              <button class="btn primary" type="button" id="btn-radio-start">Start</button>
              <button class="btn ghost" type="button" id="btn-radio-stop">Stop</button>
              <button class="btn ghost" type="button" id="btn-radio-restart">Restart</button>
              <button class="btn ghost" type="button" id="btn-radio-use-input">Use as input</button>
            </div>
            <div class="form-hint" id="radio-status"></div>
            <div class="form-hint" id="radio-output-hint"></div>
            <pre class="form-hint form-hint-pre radio-logs" id="radio-logs"></pre>
          </div>

          <details class="fold">
            <summary class="fold-summary">Advanced</summary>
            <div class="fold-body">
          <div class="form-grid">
            <label class="field">
              <span>Engine</span>
              <select id="stream-transcode-engine">
                <option value="">Default (cpu)</option>
                <option value="cpu">CPU</option>
                <option value="nvidia">NVIDIA</option>
              </select>
            </label>
            <label class="field">
              <span>GPU device</span>
              <input type="number" id="stream-transcode-gpu-device" placeholder="0" />
            </label>
            <label class="field">
              <span>FFmpeg path</span>
              <input type="text" id="stream-transcode-ffmpeg-path" placeholder="ffmpeg" />
            </label>
            <label class="field">
              <span>Log file</span>
              <input type="text" id="stream-transcode-log-file" placeholder="/var/log/ffmpeg.log" />
            </label>
          </div>
          <label class="checkline">
            <input type="checkbox" id="stream-transcode-log-main" />
            <span>Log ffmpeg to Stream Hub log</span>
          </label>
          <label class="checkline">
            <input type="checkbox" id="stream-transcode-process-per-output" />
            <span>One ffmpeg process per output (fault isolation)</span>
          </label>
	          <label class="checkline">
	            <input type="checkbox" id="stream-transcode-seamless-udp-proxy" />
	            <span>Seamless UDP/RTP cutover via local proxy (warm-switch)</span>
	          </label>
	          <div class="form-hint">
	            Seamless cutover requires per-output mode and UDP/RTP outputs. For UDP unicast inputs, per-output mode may require multicast.
	          </div>

			          <label class="checkline" hidden>
			            <input type="checkbox" id="stream-transcode-ladder-enabled" />
			            <span>Profiles pipeline (internal)</span>
			          </label>
					          <div class="form-hint" id="stream-transcode-mode-hint">
					            Mode is derived from profiles: 1 profile = single output, 2+ profiles = multi-bitrate ladder. Configure outputs in the OUTPUT LIST (General tab).
					          </div>
				          <div class="form-subsection" id="stream-transcode-ladder-block" hidden>
		            <div class="list-block" id="stream-transcode-profiles-block">
		              <div class="list-header">
		                <span>PROFILES</span>
		                <button class="text-link" type="button" id="btn-add-transcode-profile">ADD PROFILE</button>
		              </div>
	              <div class="list" id="transcode-profile-list"></div>
	            </div>
	            <details class="fold">
	              <summary class="fold-summary">Profiles (JSON)</summary>
	              <div class="fold-body">
	                <textarea id="stream-transcode-profiles-json" class="textarea-grow" rows="6" placeholder='[{"id":"HDHigh","width":1280,"height":720,"bitrate_kbps":2500}]'></textarea>
	              </div>
	            </details>
		            <!-- Publish outputs are configured in the main OUTPUT LIST (General tab). -->
		            <textarea id="stream-transcode-publish-json" hidden></textarea>
			            <div class="form-hint">
			              Internal pull endpoints are always available when ladder is running:
				              <code>/live/&lt;stream_id&gt;~&lt;profile_id&gt;</code>,
			              <code>/hls/&lt;stream_id&gt;/index.m3u8</code>,
			              <code>/dash/&lt;stream_id&gt;/manifest.mpd</code>,
			              <code>/embed/&lt;stream_id&gt;</code>.
		            </div>
		            <details class="fold" id="stream-transcode-ladder-links-fold" hidden>
		              <summary class="fold-summary">Publish URLs</summary>
		              <div class="fold-body" id="stream-transcode-ladder-links"></div>
		            </details>
		          </div>

	          <details class="fold">
	            <summary class="fold-summary">FFmpeg args</summary>
	            <div class="fold-body">
              <label class="field">
                <span>Global args (one per line)</span>
                <textarea id="stream-transcode-global-args" class="textarea-grow" rows="2" placeholder="-nostats&#10;-fflags"></textarea>
              </label>
              <label class="field">
                <span>Decoder args (one per line)</span>
                <textarea id="stream-transcode-decoder-args" class="textarea-grow" rows="2" placeholder="-hwaccel&#10;nvdec"></textarea>
              </label>
              <label class="field">
                <span>Common output args (one per line)</span>
                <textarea id="stream-transcode-common-args" class="textarea-grow" rows="2" placeholder="-f&#10;mpegts"></textarea>
              </label>
              <div class="form-hint">
                Outputs and args map directly to ffmpeg argv items. Use one argument per line in the arg fields.
              </div>
            </div>
          </details>
            </div>
          </details>
          <div class="form-hint" id="stream-transcode-input-url"></div>
          <div class="form-hint" id="stream-transcode-status"></div>
          <div class="form-hint" id="stream-transcode-warmup"></div>
          <div class="form-hint" id="stream-transcode-restart"></div>
          <div class="form-hint form-hint-pre" id="stream-transcode-workers"></div>
          <div class="form-hint form-hint-pre" id="stream-transcode-stderr"></div>

          <details class="fold">
            <summary class="fold-summary">Probe &amp; restart</summary>
            <div class="fold-body">
              <label class="checkline">
                <input type="checkbox" id="stream-transcode-input-probe-udp" />
                <span>Enable UDP input bitrate probe (longer analyze window)</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="stream-transcode-input-probe-restart" />
                <span>Restart on probe interval to refresh UDP input bitrate (disruptive)</span>
              </label>
              <div class="form-hint">Runs a short pre-probe before start; requires output monitor interval &gt; 0.</div>
              <div class="form-hint">Restart/Monitor settings are configured per output (see the Monitor button).</div>
            </div>
          </details>
        </div>
        <div class="tab-content" data-tab-content="epg" data-tab-scope="stream-editor">
          <div class="form-grid">
            <label class="field">
              <span>XMLTV channel ID</span>
              <input type="text" id="stream-epg-id" placeholder="channel.id" />
            </label>
            <label class="field">
              <span>Format</span>
              <select id="stream-epg-format">
                <option value="">Default</option>
                <option value="xmltv">XMLTV</option>
                <option value="json">JSON</option>
              </select>
            </label>
          </div>
          <label class="field">
            <span>Destination</span>
            <input type="text" id="stream-epg-destination" placeholder="/var/lib/stream/epg.xml" />
          </label>
          <label class="field">
            <span>Codepage</span>
            <select id="stream-epg-codepage">
              <option value="">Auto (default)</option>
              <option value="ISO-8859-1">ISO-8859-1 (Latin-1)</option>
              <option value="ISO-8859-5">ISO-8859-5 (Cyrillic)</option>
              <option value="UTF-8">UTF-8</option>
            </select>
          </label>
          <div class="form-hint">EPG export configuration is stored with the stream. Leave fields empty to disable.</div>
        </div>
        <div class="tab-content" data-tab-content="advanced" data-tab-scope="stream-editor">
          <div class="form-grid">
            <label class="field">
              <span>Input timeout (sec)</span>
              <input type="number" id="stream-timeout" placeholder="0" />
            </label>
            <label class="field">
              <span>HTTP keep active (sec)</span>
              <input type="number" id="stream-http-keep-active" placeholder="0" />
            </label>
            <label class="field">
              <span>Token auth override</span>
              <select id="stream-auth-enabled">
                <option value="">Inherit (use settings)</option>
                <option value="true">Enable</option>
                <option value="false">Disable</option>
              </select>
            </label>
            <label class="field">
              <span>On-play backend override</span>
              <input type="text" id="stream-on-play" placeholder="http://127.0.0.1:9100/on_play" />
            </label>
            <label class="field">
              <span>On-publish backend override</span>
              <input type="text" id="stream-on-publish" placeholder="http://127.0.0.1:9100/on_publish" />
            </label>
            <label class="field">
              <span>Session keys</span>
              <input type="text" id="stream-session-keys" placeholder="ip,name,proto,token" />
            </label>
          </div>
          <div class="form-hint">0 = stop immediately, -1 = always active, &gt;0 = keep input alive after last HTTP client.</div>
          <div class="form-subsection">
            <div class="form-hint">MPEG-TS tables and reload behavior.</div>
            <div class="checkline-row">
              <label class="checkline">
                <input type="checkbox" id="stream-no-sdt" />
                <span>Disable SDT</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="stream-no-eit" />
                <span>Disable EIT</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="stream-pass-sdt" />
                <span>Pass upstream SDT</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="stream-pass-eit" />
                <span>Pass upstream EIT</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="stream-no-reload" />
                <span>Disable input reload</span>
              </label>
            </div>
          </div>
        </div>
        </div>

        <div class="modal-footer">
          <button class="btn ghost danger" type="button" id="btn-delete">Remove</button>
          <div class="footer-actions">
            <button class="btn" type="submit" id="btn-apply">Save</button>
            <button class="btn ghost" type="button" id="btn-clone">Clone</button>
            <button class="btn ghost" type="button" id="btn-analyze">Analyze</button>
            <button class="btn ghost" type="button" id="editor-cancel">X</button>
            <div class="form-note" id="editor-error"></div>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="overlay" id="output-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title" id="output-title">Output settings</div>
        <button class="icon-btn" id="output-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <form id="output-form">
        <div class="modal-body-scroll">
        <div class="form-subsection" id="output-basic-block">
          <div class="form-grid">
            <label class="field span-6">
              <span>Preset</span>
              <select id="output-preset">
                <option value="custom">Custom</option>
                <option value="hls_local">HLS (local)</option>
                <option value="dash_local">DASH (local)</option>
                <option value="http_ts_local">HTTP-TS (local)</option>
                <option value="embed_local">Embed page (local)</option>
                <option value="udp_multicast">UDP (multicast)</option>
                <option value="rtp_multicast">RTP (multicast)</option>
                <option value="srt_bridge">SRT (bridge)</option>
                <option value="rtmp_push">RTMP (push)</option>
                <option value="rtsp_push">RTSP (push)</option>
                <option value="file_ts">MPEG-TS File</option>
              </select>
            </label>
            <label class="checkline span-6">
              <input type="checkbox" id="output-enabled" />
              <span>Enable</span>
            </label>
          </div>

          <label class="field" id="output-variants-field">
            <span id="output-variants-label">Variants (empty = all)</span>
            <div class="tags-input" id="output-variants-tags">
              <input type="text" id="output-variants-input" list="output-variants-list" placeholder="HDHigh" />
            </div>
            <datalist id="output-variants-list"></datalist>
            <input type="hidden" id="output-variants" />
          </label>

          <label class="checkline" id="output-public-auto-field">
            <input type="checkbox" id="output-public-auto" />
            <span>Auto public URL</span>
          </label>
          <label class="field" id="output-public-url-field">
            <span>Public URL</span>
            <input type="text" id="output-public-url" placeholder="(auto)" />
          </label>
          <div class="apply-row" id="output-public-reset-row">
            <button class="btn ghost" type="button" id="output-public-reset">Reset to Auto</button>
          </div>

          <label class="field" id="output-destination-field">
            <span>Destination</span>
            <input type="text" id="output-destination" placeholder="udp://239.0.0.1:1234" />
          </label>

          <div class="form-hint" id="output-hint"></div>

          <div class="apply-row">
            <button class="btn ghost" type="button" id="output-advanced-toggle">Advanced â–¾</button>
          </div>
        </div>

        <div id="output-advanced-block" hidden>
          <div class="output-group" data-group="http">
            <div class="output-subgroup" data-mode="http">
              <label class="field">
                <span>Host</span>
                <input type="text" id="output-http-host" placeholder="0.0.0.0" />
              </label>
              <label class="field">
                <span>Port</span>
                <input type="number" id="output-http-port" placeholder="8000" />
              </label>
              <label class="field">
                <span>Path</span>
                <input type="text" id="output-http-path" placeholder="/stream" />
              </label>
              <label class="field">
                <span>Buffer size (KB)</span>
                <input type="number" id="output-http-buffer" placeholder="1024" />
              </label>
              <label class="field">
                <span>Buffer fill (KB)</span>
                <input type="number" id="output-http-buffer-fill" placeholder="256" />
              </label>
              <label class="checkline">
                <input type="checkbox" id="output-http-keep" />
                <span>Keep active</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="output-http-sctp" />
                <span>Use SCTP</span>
              </label>
            </div>
            <div class="output-subgroup" data-mode="hls">
              <label class="field" hidden>
                <span>Output directory</span>
                <input type="text" id="output-hls-path" />
              </label>
              <label class="field" hidden>
                <span>Base URL</span>
                <input type="text" id="output-hls-base" />
              </label>
              <label class="field">
                <span>Playlist</span>
                <input type="text" id="output-hls-playlist" placeholder="index.m3u8" />
              </label>
              <label class="field">
                <span>Prefix</span>
                <input type="text" id="output-hls-prefix" placeholder="segment" />
              </label>
              <label class="field">
                <span>Target duration (sec)</span>
                <input type="number" id="output-hls-target" placeholder="6" />
              </label>
              <label class="field">
                <span>Window</span>
                <input type="number" id="output-hls-window" placeholder="5" />
              </label>
              <label class="field">
                <span>Cleanup</span>
                <input type="number" id="output-hls-cleanup" placeholder="10" />
              </label>
              <label class="field">
                <span>Segments naming</span>
                <select id="output-hls-naming">
                  <option value="sequence">Sequence</option>
                  <option value="pcr">PCR hash</option>
                </select>
              </label>
              <label class="checkline">
                <input type="checkbox" id="output-hls-round" />
                <span>Round duration</span>
              </label>
              <label class="field">
                <span>TS extension</span>
                <input type="text" id="output-hls-ts-extension" placeholder="ts" />
              </label>
              <label class="checkline">
                <input type="checkbox" id="output-hls-wall" />
                <span>Use wall clock</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="output-hls-pass-data" />
                <span>Pass all data PIDs</span>
              </label>
            </div>
          </div>

          <div class="output-group" data-group="udp">
          <label class="field">
            <span>Address</span>
            <input type="text" id="output-udp-addr" placeholder="239.0.0.1" />
          </label>
          <label class="field">
            <span>Port</span>
            <input type="number" id="output-udp-port" placeholder="1234" />
          </label>
          <label class="field">
            <span>TTL</span>
            <input type="number" id="output-udp-ttl" placeholder="1" />
          </label>
          <label class="field">
            <span>Interface</span>
            <input type="text" id="output-udp-local" placeholder="0.0.0.0" />
          </label>
          <label class="field">
            <span>Socket size (bytes)</span>
            <input type="number" id="output-udp-socket" placeholder="0" />
          </label>
          <label class="field">
            <span>Sync buffer (MB)</span>
            <input type="number" id="output-udp-sync" placeholder="0" />
          </label>
          <label class="field">
            <span>CBR (Kbit/s)</span>
            <input type="number" id="output-udp-cbr" placeholder="0" />
          </label>
          <div class="output-audio-fix is-hidden" id="output-udp-audio-fix">
            <label class="checkline">
              <input type="checkbox" id="output-udp-audio-fix-enabled" />
              <span>Audio fix (normalize to AAC)</span>
            </label>
            <label class="checkline">
              <input type="checkbox" id="output-udp-audio-fix-force" />
              <span>Force on (always run, copy when possible)</span>
            </label>
            <label class="field">
              <span>Mode</span>
              <select id="output-udp-audio-fix-mode">
                <option value="aac">AAC (always transcode)</option>
                <option value="auto">Auto (copy if already AAC + matches params)</option>
              </select>
            </label>
            <label class="field">
              <span>AAC bitrate (kbit/s)</span>
              <input type="number" id="output-udp-audio-fix-bitrate" placeholder="128" />
            </label>
            <label class="field">
              <span>AAC sample rate (Hz)</span>
              <input type="number" id="output-udp-audio-fix-sr" placeholder="48000" />
            </label>
            <label class="field">
              <span>AAC channels</span>
              <input type="number" id="output-udp-audio-fix-ch" placeholder="2" />
            </label>
            <label class="field">
              <span>AAC profile (optional)</span>
              <input type="text" id="output-udp-audio-fix-profile" placeholder="(auto)" />
            </label>
            <label class="field">
              <span>Aresample async (0 to disable)</span>
              <input type="number" id="output-udp-audio-fix-async" placeholder="1" />
            </label>
            <label class="checkline">
              <input type="checkbox" id="output-udp-audio-fix-silence" />
              <span>Silence fallback (inject silence when audio missing)</span>
            </label>
            <label class="field">
              <span>Probe interval (sec)</span>
              <input type="number" id="output-udp-audio-fix-interval" placeholder="30" />
            </label>
            <label class="field">
              <span>Probe duration (sec)</span>
              <input type="number" id="output-udp-audio-fix-duration" placeholder="2" />
            </label>
            <label class="field">
              <span>Mismatch hold (sec)</span>
              <input type="number" id="output-udp-audio-fix-hold" placeholder="10" />
            </label>
            <label class="field">
              <span>Restart cooldown (sec)</span>
              <input type="number" id="output-udp-audio-fix-cooldown" placeholder="1200" />
            </label>
	            <div class="form-hint">
	              Checks the UDP output audio type; if not AAC (0x0F), Stream Hub starts an AAC normalize pass.
	            </div>
          </div>
          <div class="form-hint output-audio-fix-global-hint" id="output-audio-fix-global-hint">
            Audio Fix is configured globally in General â†’ Transcoding.
          </div>
        </div>

        <div class="output-group" data-group="srt">
          <label class="field">
            <span>SRT URL</span>
            <input type="text" id="output-srt-url" placeholder="srt://host:port?mode=caller" />
          </label>
          <label class="field">
            <span>Bridge port (UDP)</span>
            <input type="number" id="output-srt-bridge-port" placeholder="14000" />
          </label>
	          <div class="form-hint">
	            Requires ffmpeg; Stream Hub sends MPEG-TS to a local UDP port which ffmpeg forwards to SRT.
	          </div>
          <div class="form-subsection">
            <div class="panel-title">Bridge advanced</div>
            <div class="form-grid">
              <label class="field">
                <span>Bridge address</span>
                <input type="text" id="output-srt-bridge-addr" placeholder="127.0.0.1" />
              </label>
              <label class="field">
                <span>Bridge local interface</span>
                <input type="text" id="output-srt-bridge-localaddr" placeholder="0.0.0.0" />
              </label>
              <label class="field">
                <span>Packet size</span>
                <input type="number" id="output-srt-bridge-pkt-size" placeholder="1316" />
              </label>
              <label class="field">
                <span>Socket size (bytes)</span>
                <input type="number" id="output-srt-bridge-socket" placeholder="0" />
              </label>
              <label class="field">
                <span>Bridge TTL</span>
                <input type="number" id="output-srt-bridge-ttl" placeholder="1" />
              </label>
            </div>
            <label class="field">
              <span>Bridge bin</span>
              <input type="text" id="output-srt-bridge-bin" placeholder="ffmpeg" />
            </label>
            <label class="field">
              <span>Bridge log level</span>
              <input type="text" id="output-srt-bridge-log" placeholder="warning" />
            </label>
              <label class="field">
                <span>Bridge input args (one per line)</span>
                <textarea id="output-srt-bridge-input-args" class="textarea-grow" rows="2" placeholder="-re"></textarea>
              </label>
              <label class="field">
                <span>Bridge output args (one per line)</span>
                <textarea id="output-srt-bridge-output-args" class="textarea-grow" rows="2" placeholder="-flush_packets&#10;1"></textarea>
              </label>
            <div class="form-hint">One argument per line. Split flags and values into separate lines.</div>
          </div>
        </div>

        <div class="output-group" data-group="np">
          <label class="field">
            <span>Host</span>
            <input type="text" id="output-np-host" placeholder="example.com" />
          </label>
          <label class="field">
            <span>Port</span>
            <input type="number" id="output-np-port" placeholder="80" />
          </label>
          <label class="field">
            <span>Path</span>
            <input type="text" id="output-np-path" placeholder="/push" />
          </label>
          <label class="field">
            <span>Timeout (sec)</span>
            <input type="number" id="output-np-timeout" placeholder="5" />
          </label>
          <label class="field">
            <span>Buffer size (KB)</span>
            <input type="number" id="output-np-buffer" placeholder="1024" />
          </label>
          <label class="field">
            <span>Buffer fill (KB)</span>
            <input type="number" id="output-np-buffer-fill" placeholder="256" />
          </label>
          <label class="checkline">
            <input type="checkbox" id="output-np-sctp" />
            <span>Use SCTP</span>
          </label>
        </div>

        <div class="output-group" data-group="file">
          <label class="field">
            <span>Filename</span>
            <input type="text" id="output-file-name" placeholder="/tmp/stream.ts" />
          </label>
          <label class="field">
            <span>Buffer size (KB)</span>
            <input type="number" id="output-file-buffer" placeholder="32" />
          </label>
          <label class="checkline">
            <input type="checkbox" id="output-file-m2ts" />
            <span>Use M2TS</span>
          </label>
          <label class="checkline">
            <input type="checkbox" id="output-file-aio" />
            <span>Use async write (AIO)</span>
          </label>
          <label class="checkline">
            <input type="checkbox" id="output-file-directio" />
            <span>Use Direct I/O</span>
          </label>
        </div>
        </div>
        </div>

        <div class="modal-footer">
          <button class="btn" type="submit" id="output-save">OK</button>
          <button class="btn ghost" type="button" id="output-cancel">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <div class="overlay" id="audio-fix-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title">Audio Fix</div>
        <button class="icon-btn" id="audio-fix-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <form id="audio-fix-form">
        <div class="modal-body-scroll">
          <div class="form-subsection">
            <div class="form-grid">
              <label class="checkline span-6">
                <input type="checkbox" id="audio-fix-enabled" />
                <span>Enable</span>
              </label>
              <label class="checkline span-6">
                <input type="checkbox" id="audio-fix-force" />
                <span>Force on (always run, copy when possible)</span>
              </label>
              <label class="field span-6">
                <span>Mode</span>
                <select id="audio-fix-mode">
                  <option value="aac">AAC (always transcode)</option>
                  <option value="auto">Auto (copy if already AAC + matches params)</option>
                </select>
              </label>
              <label class="field span-6">
                <span>AAC profile (optional)</span>
                <input type="text" id="audio-fix-profile" placeholder="(auto)" />
              </label>
              <label class="field span-4">
                <span>AAC bitrate (kbit/s)</span>
                <input type="number" id="audio-fix-bitrate" placeholder="128" />
              </label>
              <label class="field span-4">
                <span>AAC sample rate (Hz)</span>
                <input type="number" id="audio-fix-sr" placeholder="48000" />
              </label>
              <label class="field span-4">
                <span>AAC channels</span>
                <input type="number" id="audio-fix-ch" placeholder="2" />
              </label>
              <label class="field span-4">
                <span>Aresample async (0 to disable)</span>
                <input type="number" id="audio-fix-async" placeholder="1" />
              </label>
              <label class="checkline span-8">
                <input type="checkbox" id="audio-fix-silence" />
                <span>Silence fallback (inject silence when audio missing)</span>
              </label>
              <label class="field span-4">
                <span>Probe interval (sec)</span>
                <input type="number" id="audio-fix-interval" placeholder="30" />
              </label>
              <label class="field span-4">
                <span>Probe duration (sec)</span>
                <input type="number" id="audio-fix-duration" placeholder="2" />
              </label>
              <label class="field span-4">
                <span>Mismatch hold (sec)</span>
                <input type="number" id="audio-fix-hold" placeholder="10" />
              </label>
              <label class="field span-4">
                <span>Restart cooldown (sec)</span>
                <input type="number" id="audio-fix-cooldown" placeholder="1200" />
              </label>
            </div>
            <div class="form-hint">
              Applies to UDP outputs of this stream.
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <div class="footer-actions">
            <button class="btn" type="submit" id="audio-fix-save">Save</button>
            <button class="btn ghost" type="button" id="audio-fix-cancel">X</button>
            <div class="form-note" id="audio-fix-error"></div>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="overlay" id="transcode-profile-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title" id="transcode-profile-title">Transcode profile</div>
        <button class="icon-btn" id="transcode-profile-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <form id="transcode-profile-form">
        <div class="modal-body-scroll">
          <label class="field">
            <span>Profile ID</span>
            <input type="text" id="transcode-profile-id" placeholder="HDHigh" />
          </label>
          <label class="field">
            <span>Name</span>
            <input type="text" id="transcode-profile-name" placeholder="720p" />
          </label>
          <label class="field">
            <span>FPS</span>
            <input type="number" id="transcode-profile-fps" placeholder="25" min="1" />
          </label>
          <label class="field">
            <span>Width</span>
            <input type="number" id="transcode-profile-width" placeholder="1280" min="1" />
          </label>
          <label class="field">
            <span>Height</span>
            <input type="number" id="transcode-profile-height" placeholder="720" min="1" />
          </label>
          <label class="field">
            <span>Bitrate (kbps)</span>
            <input type="number" id="transcode-profile-bitrate" placeholder="2500" min="1" />
          </label>
          <label class="field">
            <span>Maxrate (kbps)</span>
            <input type="number" id="transcode-profile-maxrate" placeholder="3000" min="1" />
          </label>
          <label class="field">
            <span>Audio mode</span>
            <select id="transcode-profile-audio-mode">
              <option value="aac">AAC</option>
              <option value="copy">Copy</option>
              <option value="auto">Auto</option>
            </select>
          </label>
          <label class="field">
            <span>Audio bitrate (kbps)</span>
            <input type="number" id="transcode-profile-audio-bitrate" placeholder="128" min="1" />
          </label>
          <label class="field">
            <span>Audio rate (Hz)</span>
            <input type="number" id="transcode-profile-audio-sr" placeholder="48000" min="1" />
          </label>
          <label class="field">
            <span>Audio channels</span>
            <input type="number" id="transcode-profile-audio-channels" placeholder="2" min="1" />
          </label>
          <label class="field">
            <span>Deinterlace</span>
            <select id="transcode-profile-deinterlace">
              <option value="auto">Auto</option>
              <option value="yadif">Yadif</option>
              <option value="off">Off</option>
            </select>
          </label>
        </div>

        <div class="form-note" id="transcode-profile-error"></div>
        <div class="modal-footer">
          <button class="btn" type="submit" id="transcode-profile-save">OK</button>
          <button class="btn ghost" type="button" id="transcode-profile-cancel">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <div class="overlay" id="transcode-monitor-overlay" aria-hidden="true">
    <div class="modal wide">
      <div class="modal-head">
        <div class="modal-title" id="transcode-monitor-title">Transcode monitor</div>
        <button class="icon-btn" id="transcode-monitor-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <form id="transcode-monitor-form">
        <div class="modal-body-scroll">
        <div class="form-note" id="transcode-monitor-target"></div>

        <div class="panel subtle">
          <div class="panel-title">Restart</div>
          <div class="form-grid">
            <label class="field">
              <span>Restart delay (sec)</span>
              <input type="number" id="transcode-monitor-restart-delay" placeholder="4" />
            </label>
            <label class="field">
              <span>No progress timeout (sec)</span>
              <input type="number" id="transcode-monitor-no-progress" placeholder="8" />
            </label>
            <label class="field">
              <span>Max error lines/min</span>
              <input type="number" id="transcode-monitor-max-errors" placeholder="20" />
            </label>
            <label class="field">
              <span>Desync threshold (ms)</span>
              <input type="number" id="transcode-monitor-desync-ms" placeholder="500" />
            </label>
            <label class="field">
              <span>Desync fail count</span>
              <input type="number" id="transcode-monitor-desync-count" placeholder="2" />
            </label>
            <label class="field">
              <span>Max restarts / 10 min</span>
              <input type="number" id="transcode-monitor-max-restarts" placeholder="10" />
            </label>
          </div>
        </div>

        <div class="panel subtle">
          <div class="panel-title">Monitor</div>
          <div class="form-grid">
            <label class="field">
              <span>Monitor engine</span>
              <select id="transcode-monitor-engine">
                <option value="auto">Auto (UDP â†’ Stream Analyze)</option>
                <option value="ffprobe">FFprobe</option>
                <option value="astra_analyze">Stream Analyze</option>
              </select>
            </label>
            <label class="field">
              <span>Probe interval (sec)</span>
              <input type="number" id="transcode-monitor-probe-interval" placeholder="3600" />
            </label>
            <label class="field">
              <span>Probe duration (sec)</span>
              <input type="number" id="transcode-monitor-probe-duration" placeholder="2" />
            </label>
            <label class="field">
              <span>Probe timeout (sec)</span>
              <input type="number" id="transcode-monitor-probe-timeout" placeholder="8" />
            </label>
            <label class="field">
              <span>Probe fail count</span>
              <input type="number" id="transcode-monitor-probe-fail" placeholder="2" />
            </label>
          </div>
          <div class="form-hint" id="transcode-monitor-probe-target"></div>
        </div>

        <div class="panel subtle">
          <div class="panel-title">Low bitrate watchdog</div>
          <label class="checkline">
            <input type="checkbox" id="transcode-monitor-low-enabled" />
            <span>Restart on low bitrate</span>
          </label>
          <div class="form-grid">
            <label class="field">
              <span>Min bitrate (kbps)</span>
              <input type="number" id="transcode-monitor-low-min" placeholder="400" />
            </label>
            <label class="field">
              <span>Hold time (sec)</span>
              <input type="number" id="transcode-monitor-low-hold" placeholder="60" />
            </label>
            <label class="field">
              <span>Restart cooldown (sec)</span>
              <input type="number" id="transcode-monitor-cooldown" placeholder="1200" />
            </label>
          </div>
          <div class="form-hint">Low bitrate uses the selected monitor engine for this output.</div>
        </div>
        </div>

        <div class="form-note" id="transcode-monitor-error"></div>
        <div class="modal-footer">
          <button class="btn" type="submit" id="transcode-monitor-save">OK</button>
          <button class="btn ghost" type="button" id="transcode-monitor-cancel">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <div class="overlay" id="input-overlay" aria-hidden="true">
    <div class="modal wide">
      <div class="modal-head">
        <div class="modal-title">Input settings</div>
        <button class="icon-btn" id="input-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <form id="input-form">
        <div class="modal-body-scroll">
        <div class="input-basic-section">
          <div class="form-grid input-basic-main-grid">
            <label class="field">
              <span>Type</span>
              <select id="input-type">
                <option value="dvb">DVB</option>
                <option value="udp">UDP</option>
                <option value="rtp">RTP</option>
                <option value="srt">SRT</option>
                <option value="rtsp">RTSP</option>
                <option value="http">HTTP</option>
                <option value="https">HTTPS</option>
                <option value="hls">HLS</option>
                <option value="stream">Stream</option>
                <option value="file">MPEG-TS File</option>
              </select>
            </label>
            <label class="field input-basic-http-only" id="input-basic-timeout-field">
              <span>Timeout (sec)</span>
              <input type="number" id="input-http-timeout" placeholder="10" />
            </label>
            <label class="field input-basic-http-only" id="input-basic-buffer-field">
              <span>Buffer size (KB)</span>
              <input type="number" id="input-http-buffer" placeholder="1024" />
            </label>
          </div>

          <label class="field">
            <span>Input URL / Raw string</span>
            <input type="text" id="input-raw" placeholder="udp://239.0.0.1:1234#cc_limit=1" />
            <div class="form-hint input-raw-error" id="input-raw-error"></div>
          </label>

          <div class="form-grid input-basic-auth-grid">
            <label class="field input-basic-http-only" id="input-basic-login-field">
              <span>Login</span>
              <input type="text" id="input-http-login" placeholder="user" />
            </label>
            <label class="field input-basic-http-only" id="input-basic-pass-field">
              <span>Password</span>
              <input type="password" id="input-http-pass" placeholder="â€¢â€¢â€¢â€¢" />
            </label>
          </div>

          <button class="btn ghost input-advanced-toggle" type="button" id="input-advanced-toggle" aria-controls="input-advanced-root" aria-expanded="false">
            Advanced â–¾
          </button>
        </div>

        <div class="input-advanced-root" id="input-advanced-root" hidden>
          <details class="fold" id="input-connection-fold">
            <summary class="fold-summary">Connection (advanced)</summary>
            <div class="fold-body">
              <div class="form-subsection">
                <div class="form-grid input-preset-grid">
                  <label class="field">
                    <span>Preset</span>
                    <select id="input-preset">
                      <option value="">Custom</option>
                      <option value="udp_multicast">UDP Multicast</option>
                      <option value="rtp_multicast">RTP Multicast</option>
                      <option value="http_ts">HTTP MPEG-TS</option>
                      <option value="hls_m3u8">HLS (m3u8)</option>
                      <option value="srt_caller">SRT Caller</option>
                      <option value="rtsp_tcp">RTSP (TCP)</option>
                      <option value="file_loop">MPEG-TS File (loop)</option>
                    </select>
                  </label>
                  <div class="field">
                    <span>Apply</span>
                    <button class="btn ghost" type="button" id="input-preset-apply">Apply</button>
                  </div>
                </div>
                <div class="form-hint">Applies common input fields and options.</div>
              </div>

              <div class="input-group" data-group="dvb">
                <label class="field">
                  <span>DVB adapter id</span>
                  <input type="text" id="input-dvb-id" placeholder="adapter_0" />
                </label>
              </div>

              <div class="input-group" data-group="udp">
                <label class="field">
                  <span>Interface</span>
                  <input type="text" id="input-udp-iface" placeholder="eth0" />
                </label>
                <label class="field">
                  <span>Address</span>
                  <input type="text" id="input-udp-addr" placeholder="239.0.0.1" />
                </label>
                <label class="field">
                  <span>Port</span>
                  <input type="number" id="input-udp-port" placeholder="1234" />
                </label>
                <label class="field">
                  <span>Socket size (bytes)</span>
                  <input type="number" id="input-udp-socket" placeholder="0" />
                </label>
              </div>

              <div class="input-group" data-group="http">
                <label class="field">
                  <span>Host</span>
                  <input type="text" id="input-http-host" placeholder="example.com" />
                </label>
                <label class="field">
                  <span>Port</span>
                  <input type="number" id="input-http-port" placeholder="80" />
                </label>
                <label class="field">
                  <span>Path</span>
                  <input type="text" id="input-http-path" placeholder="/stream" />
                </label>
	                <label class="field">
	                  <span>User-Agent</span>
	                  <input type="text" id="input-http-ua" placeholder="Stream" />
	                </label>
              </div>

              <div class="input-group" data-group="bridge">
                <label class="field">
                  <span>URL</span>
                  <input type="text" id="input-bridge-url" placeholder="srt://host:port?mode=caller" />
                </label>
                <label class="field">
                  <span>Bridge port (UDP)</span>
                  <input type="number" id="input-bridge-port" placeholder="14000" />
                </label>
	                <div class="form-hint">
	                  Requires ffmpeg; Stream Hub reads via ffmpeg and injects into a local UDP port.
	                </div>
              </div>

              <div class="input-group" data-group="file">
                <label class="field">
                  <span>Filename</span>
                  <input type="text" id="input-file-name" placeholder="/mnt/raid0/file.ts" />
                </label>
                <label class="checkline">
                  <input type="checkbox" id="input-file-loop" />
                  <span>Loop</span>
                </label>
              </div>

              <div class="input-group" data-group="stream">
                <label class="field">
                  <span>Stream ID</span>
                  <input type="text" id="input-stream-id" placeholder="stream_1" />
                </label>
                <div class="form-hint">Uses another stream as input: <code>stream://&lt;id&gt;</code></div>
              </div>
            </div>
          </details>

          <details class="fold" id="input-buffering-fold">
            <summary class="fold-summary">Buffering &amp; pacing (advanced)</summary>
            <div class="fold-body">
              <div class="form-grid">
                <label class="field">
                  <span>Network profile</span>
                  <select id="input-net-profile">
                    <option value="">Auto (default)</option>
                    <option value="dc">dc (datacenter)</option>
                    <option value="wan">wan (WAN)</option>
                    <option value="bad">bad (unstable)</option>
                    <option value="max">max (aggressive)</option>
                    <option value="superbad">superbad (extreme)</option>
                  </select>
                </label>
                <div class="field">
                  <span>Profile preset</span>
                  <button class="btn ghost" type="button" id="input-net-profile-apply">Apply preset</button>
                </div>
                <label class="field">
                  <span>Jitter buffer (ms)</span>
                  <input type="number" id="input-jitter-ms" placeholder="0" />
                </label>
                <label class="checkline">
                  <input type="checkbox" id="input-playout-enabled" />
                  <span>Paced playout (anti-jitter)</span>
                </label>
              </div>

              <details class="fold" id="input-net-fold" hidden>
                <summary class="fold-summary">Network resilience (advanced)</summary>
                <div class="fold-body form-grid">
                  <label class="field">
                    <span>Connect timeout (ms)</span>
                    <input type="number" id="input-net-connect" placeholder="3000" />
                  </label>
                  <label class="field">
                    <span>Read timeout (ms)</span>
                    <input type="number" id="input-net-read" placeholder="8000" />
                  </label>
                  <label class="field">
                    <span>Stall timeout (ms)</span>
                    <input type="number" id="input-net-stall" placeholder="5000" />
                  </label>
                  <label class="field">
                    <span>Max retries</span>
                    <input type="number" id="input-net-max-retries" placeholder="10" />
                  </label>
                  <label class="field">
                    <span>Backoff min (ms)</span>
                    <input type="number" id="input-net-backoff-min" placeholder="500" />
                  </label>
                  <label class="field">
                    <span>Backoff max (ms)</span>
                    <input type="number" id="input-net-backoff-max" placeholder="10000" />
                  </label>
                  <label class="field">
                    <span>Backoff jitter (%)</span>
                    <input type="number" id="input-net-backoff-jitter" placeholder="20" />
                  </label>
                  <label class="field">
                    <span>Low speed (B/s)</span>
                    <input type="number" id="input-net-low-speed" placeholder="1024" />
                  </label>
                  <label class="field">
                    <span>Low speed window (sec)</span>
                    <input type="number" id="input-net-low-speed-time" placeholder="5" />
                  </label>
                  <label class="field">
                    <span>DNS cache TTL (sec)</span>
                    <input type="number" id="input-net-dns-ttl" placeholder="0" />
                  </label>
                  <label class="checkline">
                    <input type="checkbox" id="input-net-keepalive" />
                    <span>HTTP keepalive</span>
                  </label>
                  <label class="checkline">
                    <input type="checkbox" id="input-net-auto" />
                    <span>Adaptive auto-tune (unstable networks)</span>
                  </label>
                  <label class="field">
                    <span>Auto max level</span>
                    <input type="number" id="input-net-auto-max-level" placeholder="3" />
                  </label>
                  <label class="field">
                    <span>Auto relax (sec)</span>
                    <input type="number" id="input-net-auto-relax-sec" placeholder="120" />
                  </label>
                  <label class="field">
                    <span>Auto error window (sec)</span>
                    <input type="number" id="input-net-auto-window-sec" placeholder="30" />
                  </label>
                  <label class="field">
                    <span>Auto min interval (sec)</span>
                    <input type="number" id="input-net-auto-min-interval" placeholder="5" />
                  </label>
                  <label class="field">
                    <span>Auto burst threshold (errors)</span>
                    <input type="number" id="input-net-auto-burst" placeholder="2" />
                  </label>
                  <label class="field">
                    <span>Jitter max (MB)</span>
                    <input type="number" id="input-jitter-max-mb" placeholder="4" />
                  </label>
                  <label class="checkline">
                    <input type="checkbox" id="input-net-tune" />
                    <span>Scheduled optimizer (3-5 min test)</span>
                  </label>
                </div>
                <div class="form-hint">Overrides global defaults for this input only.</div>
              </details>

              <details class="fold" id="input-hls-fold" hidden>
                <summary class="fold-summary">HLS ingest (advanced)</summary>
                <div class="fold-body form-grid">
                  <label class="field">
                    <span>Ring buffer segments</span>
                    <input type="number" id="input-hls-max-segments" placeholder="10" />
                  </label>
                  <label class="field">
                    <span>Max gap segments</span>
                    <input type="number" id="input-hls-max-gap" placeholder="3" />
                  </label>
                  <label class="field">
                    <span>Segment retries</span>
                    <input type="number" id="input-hls-seg-retries" placeholder="3" />
                  </label>
                  <label class="field">
                    <span>Segment parallelism</span>
                    <input type="number" id="input-hls-max-parallel" placeholder="1" />
                  </label>
                </div>
                <div class="form-hint">Applies only to HLS inputs. Blank fields use defaults.</div>
              </details>

              <details class="fold" id="input-playout-fold" hidden>
                <summary class="fold-summary">Playout pacer (advanced)</summary>
                <div class="fold-body form-grid">
                  <label class="field">
                    <span>Mode</span>
                    <select id="input-playout-mode">
                      <option value="auto">auto</option>
                      <option value="cbr">cbr</option>
                    </select>
                  </label>
                  <label class="field">
                    <span>Target bitrate (kbps)</span>
                    <input type="text" id="input-playout-target-kbps" placeholder="auto" />
                  </label>
                  <label class="field">
                    <span>Tick (ms)</span>
                    <input type="number" id="input-playout-tick-ms" placeholder="10" />
                  </label>
                  <label class="checkline">
                    <input type="checkbox" id="input-playout-null" />
                    <span>NULL stuffing</span>
                  </label>
                  <label class="field">
                    <span>Min fill (ms)</span>
                    <input type="number" id="input-playout-min-fill-ms" placeholder="0" />
                  </label>
                  <label class="field">
                    <span>Target fill (ms)</span>
                    <input type="number" id="input-playout-target-fill-ms" placeholder="0" />
                  </label>
                  <label class="field">
                    <span>Max buffer (MB)</span>
                    <input type="number" id="input-playout-max-mb" placeholder="16" />
                  </label>
                </div>
                <div class="form-hint">Applies only when playout is enabled. Blank fields use defaults.</div>
              </details>
            </div>
          </details>

          <details class="fold" id="input-ts-fold">
            <summary class="fold-summary">TS / Service selection (advanced)</summary>
            <div class="fold-body form-grid">
              <label class="field">
                <span>PNR</span>
                <input type="number" id="input-pnr" placeholder="Service ID" />
              </label>
              <label class="field">
                <span>Set PNR</span>
                <input type="number" id="input-set-pnr" placeholder="New PNR" />
              </label>
              <label class="field">
                <span>Set TSID</span>
                <input type="number" id="input-set-tsid" placeholder="Transport Stream ID" />
              </label>
              <label class="field">
                <span>PID map</span>
                <input type="text" id="input-map" placeholder="pmt=100,video=101" />
              </label>
              <label class="field">
                <span>Filter</span>
                <input type="text" id="input-filter" placeholder="pid,pid" />
              </label>
              <label class="field">
                <span>Filter~</span>
                <input type="text" id="input-filter-not" placeholder="pid,pid" />
              </label>
              <label class="field">
                <span>Bitrate limit (Kbit/s)</span>
                <input type="number" id="input-bitrate-limit" placeholder="0" />
              </label>
            </div>
          </details>

          <details class="fold" id="input-cas-fold">
            <summary class="fold-summary">CAS / Keys (advanced)</summary>
            <div class="fold-body form-grid">
              <label class="field">
                <span>BISS key</span>
                <input type="text" id="input-biss" placeholder="1122330044556600" />
              </label>
              <label class="field">
                <span>SoftCAM id</span>
                <select id="input-cam-id">
                  <option value="">None</option>
                </select>
              </label>
              <label class="field">
                <span>SoftCAM backup id</span>
                <select id="input-cam-backup-id">
                  <option value="">None</option>
                </select>
              </label>
              <label class="field">
                <span>ECM PID</span>
                <input type="number" id="input-ecm-pid" placeholder="0" />
              </label>
              <label class="field">
                <span>Shift (Mbit)</span>
                <input type="number" id="input-shift" placeholder="0" />
              </label>
            </div>
          </details>

          <details class="fold" id="input-detectors-fold">
            <summary class="fold-summary">Quality detectors (advanced)</summary>
            <div class="fold-body">
              <label class="checkline input-detectors-master-toggle">
                <input type="checkbox" id="input-detectors-enabled" />
                <span>Enable detectors</span>
              </label>

              <div class="input-detectors-body" id="input-detectors-body" hidden>
                <label class="field detector-preset">
                  <span>Quality preset</span>
                  <select id="input-quality-preset">
                    <option value="off">Off</option>
                    <option value="basic">Basic</option>
                    <option value="full">Full</option>
                    <option value="custom">Custom</option>
                  </select>
                </label>

                <div class="detectors-list">
                  <div class="detector-group">
                    <div class="detector-row">
                      <label class="checkline detector-toggle">
                        <input type="checkbox" id="input-cc-limit-enabled" />
                        <span>CC errors limit</span>
                      </label>
                      <label class="field detector-field">
                        <span>Limit</span>
                        <input type="number" id="input-cc-limit" placeholder="1" />
                      </label>
                    </div>
                  </div>

                  <div class="detector-group">
                    <div class="detector-row">
                      <label class="checkline detector-toggle">
                        <input type="checkbox" id="input-no-audio-enabled" />
                        <span>No audio detection</span>
                      </label>
                      <label class="field detector-field">
                        <span>Timeout (sec)</span>
                        <input type="number" id="input-no-audio-timeout" placeholder="5" />
                      </label>
                      <div class="detector-hint">Cheap, no decoding</div>
                    </div>
                  </div>

                  <div class="detector-group">
                    <div class="detector-row">
                      <label class="checkline detector-toggle">
                        <input type="checkbox" id="input-stop-video-enabled" />
                        <span>Stop video detection</span>
                      </label>
                      <label class="field detector-field">
                        <span>Timeout (sec)</span>
                        <input type="number" id="input-stop-video-timeout" placeholder="5" />
                      </label>
                      <button class="btn ghost detector-details-toggle" type="button" data-target="detector-stop-video-details" aria-expanded="false">
                        Details
                      </button>
                    </div>
                    <div class="detector-details" id="detector-stop-video-details" hidden>
                      <div class="form-grid">
                        <label class="field">
                          <span>Mode</span>
                          <select id="input-stop-video-mode">
                            <option value="pts">PTS / no video</option>
                            <option value="freeze">Freeze (IDR hash)</option>
                          </select>
                        </label>
                        <label class="field">
                          <span>Freeze window (sec)</span>
                          <input type="number" id="input-stop-video-freeze" placeholder="10" />
                        </label>
                      </div>
                    </div>
                  </div>

                  <div class="detector-group">
                    <div class="detector-row">
                      <label class="checkline detector-toggle">
                        <input type="checkbox" id="input-detect-av-enabled" />
                        <span>Detect AV desync</span>
                      </label>
                      <label class="field detector-field">
                        <span>Threshold (ms)</span>
                        <input type="number" id="input-detect-av-threshold" placeholder="800" />
                      </label>
                      <button class="btn ghost detector-details-toggle" type="button" data-target="detector-av-details" aria-expanded="false">
                        Details
                      </button>
                    </div>
                    <div class="detector-details" id="detector-av-details" hidden>
                      <div class="form-grid">
                        <label class="field">
                          <span>Hold (sec)</span>
                          <input type="number" id="input-detect-av-hold" placeholder="3" />
                        </label>
                        <label class="field">
                          <span>Stable (sec)</span>
                          <input type="number" id="input-detect-av-stable" placeholder="10" />
                        </label>
                        <label class="field">
                          <span>Resend (sec)</span>
                          <input type="number" id="input-detect-av-resend" placeholder="60" />
                        </label>
                      </div>
                    </div>
                  </div>

                  <div class="detector-group">
                    <div class="detector-row">
                      <label class="checkline detector-toggle">
                        <input type="checkbox" id="input-silence-enabled" />
                        <span>Silence detect (ffmpeg probe)</span>
                      </label>
                      <label class="field detector-field">
                        <span>Duration (sec)</span>
                        <input type="number" id="input-silence-duration" placeholder="20" />
                      </label>
                      <button class="btn ghost detector-details-toggle" type="button" data-target="detector-silence-details" aria-expanded="false">
                        Details
                      </button>
                    </div>
                    <div class="detector-details" id="detector-silence-details" hidden>
                      <div class="form-grid">
                        <label class="field">
                          <span>Interval (sec)</span>
                          <input type="number" id="input-silence-interval" placeholder="10" />
                        </label>
                        <label class="field">
                          <span>Noise (dB)</span>
                          <input type="number" id="input-silence-noise" placeholder="-30" />
                        </label>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="form-error" id="input-detectors-error"></div>
              </div>
            </div>
            <div class="form-hint">Detectors run only on the active input. Silence detect uses a short ffmpeg probe.</div>
          </details>

          <details class="fold" id="input-misc-fold">
            <summary class="fold-summary">Misc (advanced)</summary>
            <div class="fold-body input-misc-grid">
              <label class="checkline">
                <input type="checkbox" id="input-cam" />
                <span>Use DVB-CI (cam)</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="input-cas" />
                <span>Pass CA tables (cas)</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="input-pass-sdt" />
                <span>Pass SDT</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="input-pass-eit" />
                <span>Pass EIT</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="input-no-reload" />
                <span>No reload</span>
              </label>
              <label class="checkline">
                <input type="checkbox" id="input-no-analyze" />
                <span>Disable analyze</span>
              </label>
            </div>
          </details>
        </div>
        </div>

        <div class="modal-footer">
          <button class="btn" type="submit" id="input-save">OK</button>
          <button class="btn ghost" type="button" id="input-cancel">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <div class="overlay" id="splitter-link-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title">HLSSplitter link</div>
        <button class="icon-btn" id="splitter-link-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <form id="splitter-link-form">
        <label class="checkline">
          <input type="checkbox" id="splitter-link-enabled" checked />
          <span>Enable</span>
        </label>
        <label class="field">
          <span>Input URL (HTTP)</span>
          <input type="text" id="splitter-link-url" placeholder="http://127.0.0.1:8080/path" />
        </label>
        <div class="form-grid">
          <label class="field">
            <span>Bandwidth</span>
            <input type="number" id="splitter-link-bandwidth" placeholder="1800000" />
          </label>
          <label class="field">
            <span>Buffering</span>
            <input type="number" id="splitter-link-buffering" placeholder="10" />
          </label>
        </div>
        <div class="modal-footer">
          <div class="footer-actions">
            <button class="btn" type="submit" id="splitter-link-save">Save</button>
            <button class="btn ghost" type="button" id="splitter-link-cancel">Cancel</button>
            <div class="form-note" id="splitter-link-error"></div>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="overlay" id="splitter-allow-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title">HLSSplitter allow rule</div>
        <button class="icon-btn" id="splitter-allow-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <form id="splitter-allow-form">
        <label class="field">
          <span>Rule type</span>
          <select id="splitter-allow-kind">
            <option value="allow">allow</option>
            <option value="allowRange">allowRange</option>
          </select>
        </label>
        <label class="field">
          <span>Value</span>
          <input type="text" id="splitter-allow-value" placeholder="0.0.0.0" />
        </label>
        <div class="modal-footer">
          <div class="footer-actions">
            <button class="btn" type="submit" id="splitter-allow-save">Save</button>
            <button class="btn ghost" type="button" id="splitter-allow-cancel">Cancel</button>
            <div class="form-note" id="splitter-allow-error"></div>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="overlay" id="splitter-config-overlay" aria-hidden="true">
    <div class="modal wide">
      <div class="modal-head">
        <div class="modal-title">HLSSplitter config</div>
        <button class="icon-btn" id="splitter-config-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <div class="splitter-config-body">
        <pre class="splitter-config-preview" id="splitter-config-preview"></pre>
        <div class="form-note" id="splitter-config-error"></div>
      </div>
      <div class="modal-footer">
        <div class="footer-actions">
          <button class="btn ghost" type="button" id="splitter-config-copy">Copy</button>
          <button class="btn" type="button" id="splitter-config-dismiss">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div class="overlay" id="buffer-input-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title">Buffer input</div>
        <button class="icon-btn" id="buffer-input-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <form id="buffer-input-form">
        <label class="checkline">
          <input type="checkbox" id="buffer-input-enabled" checked />
          <span>Enable</span>
        </label>
        <label class="field">
          <span>Input URL (HTTP)</span>
          <input type="text" id="buffer-input-url" placeholder="http://127.0.0.1:8080/path" />
        </label>
        <label class="field">
          <span>Priority</span>
          <input type="number" id="buffer-input-priority" placeholder="0" />
        </label>
        <div class="modal-footer">
          <div class="footer-actions">
            <button class="btn" type="submit" id="buffer-input-save">Save</button>
            <button class="btn ghost" type="button" id="buffer-input-cancel">Cancel</button>
            <div class="form-note" id="buffer-input-error"></div>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="overlay" id="buffer-allow-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title">Buffer allow rule</div>
        <button class="icon-btn" id="buffer-allow-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <form id="buffer-allow-form">
        <label class="field">
          <span>Rule type</span>
          <select id="buffer-allow-kind">
            <option value="allow">allow</option>
            <option value="allowRange">allowRange</option>
          </select>
        </label>
        <label class="field">
          <span>Value</span>
          <input type="text" id="buffer-allow-value" placeholder="0.0.0.0" />
        </label>
        <div class="modal-footer">
          <div class="footer-actions">
            <button class="btn" type="submit" id="buffer-allow-save">Save</button>
            <button class="btn ghost" type="button" id="buffer-allow-cancel">Cancel</button>
            <div class="form-note" id="buffer-allow-error"></div>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="overlay" id="group-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title" id="group-title">New group</div>
        <button class="icon-btn" id="group-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <form id="group-form">
        <label class="field">
          <span>ID</span>
          <input type="text" id="group-id" placeholder="news" />
        </label>
        <label class="field">
          <span>Name</span>
          <input type="text" id="group-name" placeholder="News" />
        </label>
        <div class="modal-footer">
          <div class="footer-actions">
            <button class="btn" type="submit" id="group-save">Save</button>
            <button class="btn ghost" type="button" id="group-cancel">Cancel</button>
            <div class="form-note" id="group-error"></div>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="overlay" id="server-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title" id="server-title">New server</div>
        <button class="icon-btn" id="server-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <form id="server-form">
        <label class="checkline">
          <input type="checkbox" id="server-enabled" checked />
          <span>Enable</span>
        </label>
	        <label class="field">
	          <span>ID</span>
	          <input type="text" id="server-id" placeholder="stream-main" />
	        </label>
        <label class="field">
          <span>Name</span>
          <input type="text" id="server-name" placeholder="Main server" />
        </label>
        <label class="field">
          <span>Type</span>
          <input type="text" id="server-type" placeholder="streamer" />
        </label>
        <label class="field">
          <span>Address</span>
          <input type="text" id="server-host" placeholder="http://127.0.0.1" />
        </label>
        <label class="field">
          <span>Port</span>
          <input type="number" id="server-port" placeholder="8000" />
        </label>
        <label class="field">
          <span>Login</span>
          <input type="text" id="server-login" placeholder="admin" />
        </label>
        <label class="field">
          <span>Password</span>
          <input type="password" id="server-password" placeholder="(leave empty to keep)" />
          <small class="form-hint" id="server-password-hint"></small>
        </label>
        <div class="modal-footer">
          <div class="footer-actions">
            <button class="btn" type="submit" id="server-save">Save</button>
            <button class="btn ghost" type="button" id="server-cancel">Cancel</button>
            <button class="btn ghost" type="button" id="server-test">Test</button>
            <div class="form-note" id="server-error"></div>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="overlay" id="softcam-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title" id="softcam-title">New softcam</div>
        <button class="icon-btn" id="softcam-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <form id="softcam-form">
        <!-- newcamd ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ð¹ Ñ‚Ð¸Ð¿ softcam, Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ñ…Ñ€Ð°Ð½Ð¸Ð¼ ÐºÐ°Ðº hidden -->
        <input type="hidden" id="softcam-type" value="newcamd" />

        <div class="modal-body-scroll">
          <label class="checkline">
            <input type="checkbox" id="softcam-enabled" checked />
            <span>Enable</span>
          </label>

          <div class="tabbar softcam-tabbar">
            <button class="tab active" type="button" data-tab="general" data-tab-scope="softcam">General</button>
            <button class="tab" type="button" data-tab="advanced" data-tab-scope="softcam">Advanced</button>
          </div>

          <div class="tab-content active" data-tab-content="general" data-tab-scope="softcam">
            <div class="softcam-grid">
              <label class="field">
                <span>Name</span>
                <input type="text" id="softcam-name" placeholder="AUBOX" />
              </label>
              <label class="field">
                <span>ID</span>
                <input type="text" id="softcam-id" placeholder="aubox" />
              </label>
              <label class="field">
                <span>Host</span>
                <input type="text" id="softcam-host" placeholder="127.0.0.1" />
              </label>
              <label class="field">
                <span>Port</span>
                <input type="number" id="softcam-port" placeholder="10000" />
              </label>
              <label class="field">
                <span>User</span>
                <input type="text" id="softcam-user" placeholder="user" />
              </label>
              <label class="field">
                <span>Password</span>
                <input type="password" id="softcam-pass" placeholder="(leave empty to keep)" />
                <small class="form-hint" id="softcam-pass-hint"></small>
              </label>
            </div>
          </div>

          <div class="tab-content" data-tab-content="advanced" data-tab-scope="softcam">
            <div class="softcam-grid">
              <label class="field span-2">
                <span>DES Key</span>
                <input type="text" id="softcam-key" placeholder="0102030405060708091011121314" />
                <small class="form-hint">Default: 0102030405060708091011121314</small>
              </label>
              <label class="field">
                <span>CaID</span>
                <input type="text" id="softcam-caid" placeholder="0500" />
              </label>
              <label class="field">
                <span>Timeout</span>
                <input type="number" id="softcam-timeout" placeholder="8" />
                <small class="form-hint">Seconds (default: 8)</small>
              </label>
              <label class="field">
                <span>Dual CAM hedge (ms)</span>
                <input type="number" id="softcam-hedge" placeholder="0" />
                <small class="form-hint">Delay backup ECM (0 = immediate)</small>
              </label>

              <div class="checkline-row span-2">
                <label class="checkline">
                  <input type="checkbox" id="softcam-disable-emm" />
                  <span>Disable EMM</span>
                </label>
                <label class="checkline">
                  <input type="checkbox" id="softcam-split-cam" />
                  <span>Split CAM</span>
                </label>
              </div>

              <label class="field">
                <span>Shift</span>
                <input type="text" id="softcam-shift" placeholder="0" />
              </label>
              <label class="field span-2">
                <span>Comment</span>
                <input type="text" id="softcam-comment" placeholder="Optional note" />
              </label>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <div class="footer-actions">
            <button class="btn" type="submit" id="softcam-save">Save</button>
            <button class="btn ghost" type="button" id="softcam-cancel">Cancel</button>
            <button class="btn ghost" type="button" id="softcam-test">Test</button>
          </div>
          <div class="form-note" id="softcam-error"></div>
        </div>
      </form>
    </div>
  </div>

  <div class="overlay" id="softcam-test-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title" id="softcam-test-title">Softcam test</div>
        <button class="icon-btn" id="softcam-test-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <div class="modal-body-scroll">
        <div class="softcam-test-body">
          <div class="softcam-grid">
            <label class="field span-2">
              <span>CAID</span>
              <input type="text" id="softcam-test-caid" readonly />
            </label>
            <label class="field span-2">
              <span>AU</span>
              <input type="text" id="softcam-test-au" readonly />
            </label>
            <label class="field span-2">
              <span>UA</span>
              <input type="text" id="softcam-test-ua" readonly />
            </label>
          </div>
          <div class="softcam-test-idents">
            <div class="softcam-test-idents-title">IDENTS</div>
            <div class="softcam-grid" id="softcam-test-idents"></div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <div class="footer-actions">
          <button class="btn" type="button" id="softcam-test-ok">OK</button>
        </div>
      </div>
    </div>
  </div>

  <div class="overlay" id="config-error-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title" id="config-error-title">Config error</div>
        <button class="icon-btn" id="config-error-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <div class="modal-body">
        <div class="muted" id="config-error-meta">No error details.</div>
        <pre class="code-block" id="config-error-body"></pre>
      </div>
      <div class="modal-footer">
        <div class="footer-actions">
          <button class="btn ghost" type="button" id="config-error-copy">Copy</button>
          <button class="btn" type="button" id="config-error-done">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div class="overlay" id="ai-apply-confirm-overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
	        <div>
	          <div class="modal-title">Ð Ð°Ð·Ñ€ÐµÑˆÐ¸Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¾Ñ‚ StreamAI?</div>
	          <div class="modal-sub">AI ÑÐ¼Ð¾Ð¶ÐµÑ‚ Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³ Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÑ‚ÑŒ Ð¸Ñ….</div>
	        </div>
        <button class="icon-btn" id="ai-apply-confirm-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-hint">
          Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð»Ð½Ð¾Ð¼ Ð´Ð¾Ð²ÐµÑ€Ð¸Ð¸ Ðº Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÐ°Ð¼. Ð’ÑÐµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð»Ð¾Ð³Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ.
        </div>
      </div>
      <div class="modal-footer">
        <div class="footer-actions">
          <button class="btn ghost" type="button" id="ai-apply-confirm-cancel">ÐžÑ‚Ð¼ÐµÐ½Ð°</button>
          <button class="btn" type="button" id="ai-apply-confirm-ok">Ð Ð°Ð·Ñ€ÐµÑˆÐ¸Ñ‚ÑŒ</button>
        </div>
      </div>
    </div>
  </div>

  <div class="overlay" id="analyze-overlay" aria-hidden="true">
    <div class="modal analyze">
      <div class="analyze-header">
        <div class="analyze-rate" id="analyze-rate">0 Kbit/s</div>
        <div class="analyze-stat ok" id="analyze-cc">CC:0</div>
        <div class="analyze-stat ok" id="analyze-pes">PES:0</div>
      </div>
      <div class="divider"></div>
      <div class="modal-body-scroll">
        <div class="analyze-body" id="analyze-body"></div>
      </div>
      <div class="modal-footer">
        <button class="btn ghost" type="button" id="analyze-restart">Restart</button>
        <button class="btn ghost" type="button" id="analyze-copy">Copy</button>
        <button class="btn ghost" type="button" id="analyze-close">Close</button>
      </div>
    </div>
  </div>

  <div class="overlay" id="player-overlay" aria-hidden="true">
    <div class="modal wide player-modal">
      <div class="modal-head">
        <div>
          <div class="modal-title">Player</div>
          <p class="modal-sub" id="player-sub">Stream preview</p>
        </div>
        <button class="icon-btn" id="player-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <div class="player-header">
        <div class="player-badges">
          <span class="pill player-status" id="player-status">OFFLINE</span>
          <span class="pill player-input" id="player-input">Active input: -</span>
        </div>
        <div class="player-actions">
          <button class="btn ghost" type="button" id="player-open-tab">Open in new tab</button>
          <button class="btn ghost" type="button" id="player-copy-link">Copy link</button>
        </div>
      </div>
      <div class="player">
        <div class="player-frame">
          <video id="player-video" controls autoplay muted playsinline webkit-playsinline></video>
          <div class="player-loading" id="player-loading" aria-hidden="true">
            <div class="spinner"></div>
            <div class="player-loading-text">ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ...</div>
          </div>
          <div class="player-error" id="player-error" aria-hidden="true"></div>
	        </div>
	        <div class="player-meta">
	          <div class="player-link-toggle" role="tablist" aria-label="Playback mode">
	            <button class="seg active" type="button" id="player-mode-auto" data-mode="auto" aria-selected="true">Auto</button>
	            <button class="seg" type="button" id="player-mode-h264" data-mode="h264" aria-selected="false">H.264/AAC</button>
	          </div>
	          <div class="player-link-toggle" role="tablist" aria-label="Link type">
	            <button class="seg active" type="button" id="player-link-play" data-kind="play" aria-selected="true">Play</button>
	            <button class="seg" type="button" id="player-link-hls" data-kind="hls" aria-selected="false">HLS</button>
	          </div>
	          <a class="pill player-url" id="player-url" href="#" target="_blank" rel="noopener">-</a>
          <button class="btn ghost" type="button" id="player-retry">Retry</button>
        </div>
      </div>
    </div>
  </div>

  <div class="overlay" id="mpts-streams-overlay" aria-hidden="true">
    <div class="modal wide">
      <div class="modal-head">
        <div>
          <div class="modal-title">Add From Streams</div>
          <p class="modal-sub">Select existing streams. They will be added as <code>stream://stream_id</code> services.</p>
        </div>
        <button class="icon-btn" id="mpts-streams-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <div class="modal-body">
        <label class="field">
          <span>Search</span>
          <input type="text" id="mpts-streams-search" placeholder="Filter by id or name" />
        </label>
        <div class="mpts-streams-list" id="mpts-streams-list"></div>
      </div>
      <div class="modal-footer">
        <button class="btn" type="button" id="mpts-streams-add">Add selected</button>
        <button class="btn ghost" type="button" id="mpts-streams-cancel">Cancel</button>
      </div>
    </div>
  </div>

  <div class="overlay" id="adapter-scan-overlay" aria-hidden="true">
    <div class="modal wide scan">
      <div class="modal-head">
        <div>
          <div class="modal-title">DVB scan</div>
          <p class="modal-sub" id="adapter-scan-sub">Adapter scan</p>
        </div>
        <button class="icon-btn" id="adapter-scan-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <div class="scan-status" id="adapter-scan-status"></div>
      <div class="scan-signal" id="adapter-scan-signal"></div>
      <div class="divider"></div>
      <div class="scan-list" id="adapter-scan-list"></div>
      <div class="modal-footer">
        <button class="btn" type="button" id="adapter-scan-add">Add selected</button>
        <button class="btn ghost" type="button" id="adapter-scan-refresh">Rescan</button>
        <button class="btn ghost" type="button" id="adapter-scan-cancel">Close</button>
      </div>
    </div>
  </div>

  <div class="status" id="status"></div>
</body>
</html>
