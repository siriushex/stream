# PNG to Stream (резервный TS из картинки)

Функция делает короткий MPEG‑TS файл из PNG и звука.
Это удобно как резервный источник: “заставка + звук”.

## Где находится

**Edit stream → Transcode → PNG to Stream**

## Коротко

- Берём PNG + звук (тишина / писк / MP3).
- Генерируем `.ts` на 5–15 секунд.
- Файл можно использовать в **Backup** как резервный вход.

## Шаги

1. Откройте канал → **Edit stream**.
2. Перейдите в **Transcode**.
3. В блоке **PNG to Stream** выберите PNG.
4. Выберите тип звука:
   - **Silence** — тишина.
   - **Beep** — тон (несколько пресетов).
   - **MP3** — ваш файл.
5. Нажмите **Analyze main stream** (рекомендуется).
6. Нажмите **Generate TS**.

После генерации файл появится в списке доступных резервов.

## Что значит “Analyze main stream”

Это попытка считать параметры основного потока через `ffprobe`:

- кодек,
- разрешение,
- FPS,
- пиксельный формат.

Если анализ прошёл — параметры подставятся автоматически.
Так резервный TS будет максимально совместим с основным потоком.

## Где хранится файл

По умолчанию:

```
data/streams/<stream_id>/backup/backup-from-png_*.ts
```

## Ошибки

- **ffmpeg/ffprobe не найден**  
  Установите `ffmpeg` в системе.

- **Файл PNG не найден**  
  Проверьте путь и права доступа.

- **MP3 не открывается**  
  Проверьте формат и путь.

!!! tip "Рекомендация"
    Для резервного входа достаточно 10 секунд.
    Длиннее — смысла нет, файл всё равно зацикливается.

