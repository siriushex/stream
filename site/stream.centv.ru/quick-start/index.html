<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />

  <title>Stream Hub — быстрый старт</title>
  <meta name="description" content="Быстрый старт Stream Hub: установка, запуск, первый канал и проверка." />

  <link rel="stylesheet" href="/assets/site.css" />
  <script defer src="/assets/site.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div class="title">
        <b>Stream Hub</b>
        <span>Быстрый старт</span>
      </div>
    </div>
    <nav class="nav" aria-label="Навигация">
      <a href="/">Главная</a>
      <a class="primary" href="/quick-start/">Быстрый старт</a>
      <a href="/manual/">Руководство</a>
      <a href="/stream">Скачать</a>
    </nav>
  </header>

  <div class="wrap">
    <section class="doc" aria-label="Быстрый старт">
      <aside class="sidebar" aria-label="Оглавление">
        <a class="active" href="#start">С чего начать</a>
        <a href="#install">Установка</a>
        <a href="#run">Запуск</a>
        <a href="#ui">Web UI</a>
        <a href="#first">Первый канал</a>
        <a href="#check">Проверка</a>
        <a href="#systemd">Запуск как сервис</a>
      </aside>

      <main class="docmain">
        <div class="pad" id="start">
          <h1>Быстрый старт</h1>
          <p>Установка, запуск, первый канал и проверка “играет / не играет”.</p>

          <h2>Что нужно заранее</h2>
          <ul>
            <li>Сервер Linux (часто берут Ubuntu/Debian) и доступ <span style="font-family: var(--mono);">sudo</span>.</li>
            <li>Открытый порт для Web UI (пример ниже: <span style="font-family: var(--mono);">9060</span>).</li>
            <li>Адрес входного потока (например <span style="font-family: var(--mono);">udp://...</span> или <span style="font-family: var(--mono);">http://...</span>).</li>
          </ul>
        </div>

        <div class="pad" id="install">
          <h2>Установка</h2>
          <p>Выберите команду под вашу ОС.</p>
        </div>

        <pre class="code" id="cmd-install-ubuntu"># Ubuntu / Debian (готовый бинарник)
curl -fsSL https://stream.centv.ru/install.sh | sudo bash -s -- --mode binary --runtime-only</pre>
        <div class="copyrow">
          <div class="hint">Быстро. Обычно подходит для Ubuntu/Debian.</div>
          <button class="copy" type="button" data-copy="#cmd-install-ubuntu">Copy</button>
        </div>

        <pre class="code" id="cmd-install-centos"># CentOS / RHEL / Rocky / Alma (сборка из исходников)
curl -fsSL https://stream.centv.ru/install-centos.sh | sudo bash</pre>
        <div class="copyrow">
          <div class="hint">Самый совместимый вариант для CentOS‑подобных систем.</div>
          <button class="copy" type="button" data-copy="#cmd-install-centos">Copy</button>
        </div>

        <pre class="code" id="cmd-install-macos"># macOS (Apple Silicon) — для тестов/демо
curl -fsSL https://stream.centv.ru/install-macos.sh | bash</pre>
        <div class="copyrow">
          <div class="hint">На macOS это скорее “посмотреть UI/логики”, не боевой сервер.</div>
          <button class="copy" type="button" data-copy="#cmd-install-macos">Copy</button>
        </div>

        <div class="pad" id="run">
          <h2>Запуск</h2>
          <p>Для первого запуска можно начать с пустого конфига. Дальше вы будете менять всё через UI.</p>
        </div>

        <pre class="code" id="cmd-run">sudo mkdir -p /etc/stream
sudo sh -c 'echo {} > /etc/stream/prod.json'

sudo /usr/local/bin/stream -c /etc/stream/prod.json -p 9060</pre>
        <div class="copyrow">
          <div class="hint">Порт можно выбрать любой. Главное — чтобы он был свободен.</div>
          <button class="copy" type="button" data-copy="#cmd-run">Copy</button>
        </div>

        <div class="pad" id="ui">
          <h2>Web UI</h2>
          <p>Откройте: <span style="font-family: var(--mono);">http://SERVER:9060</span></p>
          <p>Если это “чистый” запуск, Stream Hub может создать пользователя. Логин/пароль будут в логах старта.</p>
        </div>

        <div class="pad" id="first">
          <h2>Первый канал (Stream)</h2>
          <ol class="steps">
            <li>Откройте <b>Dashboard</b> и нажмите <b>New Stream</b>.</li>
            <li>Заполните <b>Name</b> (как вам удобно) и <b>ID</b> (коротко, латиницей).</li>
            <li>В <b>INPUT LIST</b> нажмите <b>NEW INPUT</b> и вставьте адрес источника.</li>
            <li>В <b>OUTPUT LIST</b> нажмите <b>NEW OUTPUT</b> и добавьте выход (для начала проще UDP).</li>
            <li>Нажмите <b>Save</b>.</li>
          </ol>
          <p>
            Если вход “живой”, вы увидите битрейт и статус ONLINE в карточке канала.
          </p>
        </div>

        <div class="pad" id="check">
          <h2>Проверка (проигрывается ли поток)</h2>
          <p>Самое простое — открыть выход в VLC или ffplay.</p>
        </div>

        <pre class="code" id="cmd-check"># HTTP-TS (пример)
ffplay -fflags nobuffer -flags low_delay -probesize 32 -analyzeduration 0 http://SERVER:9060/live/STREAM_ID

# UDP (пример)
ffplay -fflags nobuffer -flags low_delay udp://239.0.0.1:1234</pre>
        <div class="copyrow">
          <div class="hint">Если не играет — сначала проверьте вход (битрейт/статус) в Dashboard.</div>
          <button class="copy" type="button" data-copy="#cmd-check">Copy</button>
        </div>

        <div class="pad" id="systemd">
          <h2>Запуск как сервис (systemd)</h2>
          <p>
            Если нужен автозапуск после перезагрузки — удобнее запускать через systemd.
          </p>
        </div>

        <pre class="code" id="cmd-systemd">sudo /usr/local/bin/stream --init

# Порт для инстанса (пример: prod)
sudo sh -c 'echo STREAM_PORT=9060 > /etc/stream/prod.env'

sudo systemctl enable --now stream@prod.service</pre>
        <div class="copyrow">
          <div class="hint">Конфиг будет: <span style="font-family: var(--mono);">/etc/stream/prod.json</span></div>
          <button class="copy" type="button" data-copy="#cmd-systemd">Copy</button>
        </div>

        <div class="pad">
          <h2>Дальше</h2>
          <ul>
            <li>Входы: <a href="/manual/inputs.html">manual/inputs</a></li>
            <li>Выходы: <a href="/manual/outputs.html">manual/outputs</a></li>
            <li>Транскодирование: <a href="/manual/transcoding.html">manual/transcoding</a></li>
            <li>Частые проблемы: <a href="/manual/troubleshooting.html">manual/troubleshooting</a></li>
          </ul>
        </div>
      </main>
    </section>

    <footer>
      <div>
        <a href="/">Главная</a> · <a href="/manual/">Руководство</a> · <a href="/stream">Скачать</a>
      </div>
      <div>© centv.ru</div>
    </footer>
  </div>
</body>
</html>
